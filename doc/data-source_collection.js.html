<!DOCTYPE html>

<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width">
	<title>LudoJS Source: data-source/collection.js</title>

	<!--[if lt IE 9]>
	<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->
	<link type="text/css" rel="stylesheet" href="styles/sunlight.default.css">

	<link type="text/css" rel="stylesheet" href="styles/site.ludojs.css">

</head>

<body>

<div class="navbar navbar-default navbar-fixed-top navbar-inverse">
<div class="container">
	<div class="navbar-header">
		<a class="navbar-brand" href="index.html">LudoJS</a>
		<button class="navbar-toggle" type="button" data-toggle="collapse" data-target="#topNavigation">
			<span class="icon-bar"></span>
			<span class="icon-bar"></span>
			<span class="icon-bar"></span>
        </button>
	</div>
	<div class="navbar-collapse collapse" id="topNavigation">
		<ul class="nav navbar-nav">
			
			<li class="dropdown">
				<a href="modules.list.html" class="dropdown-toggle" data-toggle="dropdown">Modules<b class="caret"></b></a>
				<ul class="dropdown-menu ">
					<li><a href="module-language.html">language</a></li><li><a href="module-ludo.html">ludo</a></li>
				</ul>
			</li>
			
			<li class="dropdown">
				<a href="classes.list.html" class="dropdown-toggle" data-toggle="dropdown">Classes<b class="caret"></b></a>
				<ul class="dropdown-menu ">
					<li><a href="ludo.Application.html">ludo.Application</a></li><li><a href="ludo.calendar.Base.html">ludo.calendar.Base</a></li><li><a href="ludo.calendar.Calendar.html">ludo.calendar.Calendar</a></li><li><a href="ludo.calendar.Days.html">ludo.calendar.Days</a></li><li><a href="ludo.calendar.MonthSelector.html">ludo.calendar.MonthSelector</a></li><li><a href="ludo.calendar.MonthYearSelector.html">ludo.calendar.MonthYearSelector</a></li><li><a href="ludo.calendar.NavBar.html">ludo.calendar.NavBar</a></li><li><a href="ludo.calendar.TimePicker.html">ludo.calendar.TimePicker</a></li><li><a href="ludo.calendar.Today.html">ludo.calendar.Today</a></li><li><a href="ludo.calendar.YearSelector.html">ludo.calendar.YearSelector</a></li><li><a href="ludo.canvas.Canvas.html">ludo.canvas.Canvas</a></li><li><a href="ludo.canvas.Circle.html">ludo.canvas.Circle</a></li><li><a href="ludo.canvas.Curtain.html">ludo.canvas.Curtain</a></li><li><a href="ludo.canvas.Drag.html">ludo.canvas.Drag</a></li><li><a href="ludo.canvas.Ellipse_ludo.canvas.Ellipse.html">ludo.canvas.Ellipse#ludo.canvas.Ellipse</a></li><li><a href="ludo.canvas.Filter.html">ludo.canvas.Filter</a></li><li><a href="ludo.canvas.Gradient.html">ludo.canvas.Gradient</a></li><li><a href="ludo.canvas.Group.html">ludo.canvas.Group</a></li><li><a href="ludo.canvas.Mask.html">ludo.canvas.Mask</a></li><li><a href="ludo.canvas.NamedNode.html">ludo.canvas.NamedNode</a></li><li><a href="ludo.canvas.Node.html">ludo.canvas.Node</a></li><li><a href="ludo.canvas.Paint.html">ludo.canvas.Paint</a></li><li><a href="ludo.canvas.Path.html">ludo.canvas.Path</a></li><li><a href="ludo.canvas.Polygon.html">ludo.canvas.Polygon</a></li><li><a href="ludo.canvas.Polyline.html">ludo.canvas.Polyline</a></li><li><a href="ludo.canvas.RadialGradient.html">ludo.canvas.RadialGradient</a></li><li><a href="ludo.canvas.Rect.html">ludo.canvas.Rect</a></li><li><a href="ludo.canvas.Stop.html">ludo.canvas.Stop</a></li><li><a href="ludo.canvas.Text.html">ludo.canvas.Text</a></li><li><a href="ludo.canvas.TextBox.html">ludo.canvas.TextBox</a></li><li><a href="ludo.canvas.View.html">ludo.canvas.View</a></li><li><a href="ludo.chart.DataProvider.html">ludo.chart.DataProvider</a></li><li><a href="ludo.chart.Labels.html">ludo.chart.Labels</a></li><li><a href="ludo.chart.Pie.html">ludo.chart.Pie</a></li><li><a href="ludo.chart.PieSliceHighlighted.html">ludo.chart.PieSliceHighlighted</a></li><li><a href="ludo.chart.Record.html">ludo.chart.Record</a></li><li><a href="ludo.CollectionView.html">ludo.CollectionView</a></li><li><a href="ludo.color.Color.html">ludo.color.Color</a></li><li><a href="ludo.controller.Controller.html">ludo.controller.Controller</a></li><li><a href="ludo.controller.Manager.html">ludo.controller.Manager</a></li><li><a href="ludo.Core.html">ludo.Core</a></li><li><a href="ludo.dataSource.Collection.html">ludo.dataSource.Collection</a></li><li><a href="ludo.dataSource.CollectionSearch.html">ludo.dataSource.CollectionSearch</a></li><li><a href="ludo.dataSource.HTML.html">ludo.dataSource.HTML</a></li><li><a href="ludo.dataSource.JSON.html">ludo.dataSource.JSON</a></li><li><a href="ludo.dataSource.Record.html">ludo.dataSource.Record</a></li><li><a href="ludo.dataSource.SearchParser.html">ludo.dataSource.SearchParser</a></li><li><a href="ludo.dataSource.TreeCollection.html">ludo.dataSource.TreeCollection</a></li><li><a href="ludo.dialog.Alert.html">ludo.dialog.Alert</a></li><li><a href="ludo.dialog.Confirm.html">ludo.dialog.Confirm</a></li><li><a href="ludo.dialog.Dialog.html">ludo.dialog.Dialog</a></li><li><a href="ludo.dialog.Prompt.html">ludo.dialog.Prompt</a></li><li><a href="ludo.effect.Drag.html">ludo.effect.Drag</a></li><li><a href="ludo.effect.DragDrop.html">ludo.effect.DragDrop</a></li><li><a href="ludo.effect.DropPoint.html">ludo.effect.DropPoint</a></li><li><a href="ludo.effect.Effect.html">ludo.effect.Effect</a></li><li><a href="ludo.form.Button.html">ludo.form.Button</a></li><li><a href="ludo.form.CancelButton.html">ludo.form.CancelButton</a></li><li><a href="ludo.form.Checkbox.html">ludo.form.Checkbox</a></li><li><a href="ludo.form.Combo.html">ludo.form.Combo</a></li><li><a href="ludo.form.ComboTree.html">ludo.form.ComboTree</a></li><li><a href="ludo.form.Date.html">ludo.form.Date</a></li><li><a href="ludo.form.DisplayField.html">ludo.form.DisplayField</a></li><li><a href="ludo.form.Element.html">ludo.form.Element</a></li><li><a href="ludo.form.Email.html">ludo.form.Email</a></li><li><a href="ludo.form.File.html">ludo.form.File</a></li><li><a href="ludo.form.Label.html">ludo.form.Label</a></li><li><a href="ludo.form.LabelElement.html">ludo.form.LabelElement</a></li><li><a href="ludo.form.Manager.html">ludo.form.Manager</a></li><li><a href="ludo.form.Number.html">ludo.form.Number</a></li><li><a href="ludo.form.OnOffSwitch.html">ludo.form.OnOffSwitch</a></li><li><a href="ludo.form.Password.html">ludo.form.Password</a></li><li><a href="ludo.form.Radio.html">ludo.form.Radio</a></li><li><a href="ludo.form.RadioGroup.html">ludo.form.RadioGroup</a></li><li><a href="ludo.form.ResetButton.html">ludo.form.ResetButton</a></li><li><a href="ludo.form.SearchField.html">ludo.form.SearchField</a></li><li><a href="ludo.form.Seekbar.html">ludo.form.Seekbar</a></li><li><a href="ludo.form.Select.html">ludo.form.Select</a></li><li><a href="ludo.form.Spinner.html">ludo.form.Spinner</a></li><li><a href="ludo.form.StrongPassword.html">ludo.form.StrongPassword</a></li><li><a href="ludo.form.SubmitButton.html">ludo.form.SubmitButton</a></li><li><a href="ludo.form.Text.html">ludo.form.Text</a></li><li><a href="ludo.form.Textarea.html">ludo.form.Textarea</a></li><li><a href="ludo.form.TinbyButton.html">ludo.form.TinbyButton</a></li><li><a href="ludo.form.ToggleButton.html">ludo.form.ToggleButton</a></li><li><a href="ludo.form.ToggleGroup.html">ludo.form.ToggleGroup</a></li><li><a href="ludo.form.validator.Base.html">ludo.form.validator.Base</a></li><li><a href="ludo.form.validator.Md5.html">ludo.form.validator.Md5</a></li><li><a href="ludo.FramedView.html">ludo.FramedView</a></li><li><a href="ludo.grid.ColumnManager.html">ludo.grid.ColumnManager</a></li><li><a href="ludo.grid.Grid.html">ludo.grid.Grid</a></li><li><a href="ludo.grid.RowManager.html">ludo.grid.RowManager</a></li><li><a href="ludo.layout.Accordion.html">ludo.layout.Accordion</a></li><li><a href="ludo.layout.Base.html">ludo.layout.Base</a></li><li><a href="ludo.layout.Canvas.html">ludo.layout.Canvas</a></li><li><a href="ludo.layout.Factory.html">ludo.layout.Factory</a></li><li><a href="ludo.layout.Grid.html">ludo.layout.Grid</a></li><li><a href="ludo.layout.LinearVertical.html">ludo.layout.LinearVertical</a></li><li><a href="ludo.layout.Menu.html">ludo.layout.Menu</a></li><li><a href="ludo.layout.NavBar.html">ludo.layout.NavBar</a></li><li><a href="ludo.layout.Popup.html">ludo.layout.Popup</a></li><li><a href="ludo.layout.Relative.html">ludo.layout.Relative</a></li><li><a href="ludo.layout.Renderer.html">ludo.layout.Renderer</a></li><li><a href="ludo.layout.Table.html">ludo.layout.Table</a></li><li><a href="ludo.layout.ViewPager.html">ludo.layout.ViewPager</a></li><li><a href="ludo.menu.Button.html">ludo.menu.Button</a></li><li><a href="ludo.menu.Context.html">ludo.menu.Context</a></li><li><a href="ludo.menu.DropDown.html">ludo.menu.DropDown</a></li><li><a href="ludo.menu.Menu.html">ludo.menu.Menu</a></li><li><a href="ludo.menu.MenuItem.html">ludo.menu.MenuItem</a></li><li><a href="ludo.Notification.html">ludo.Notification</a></li><li><a href="ludo.ObjectFactory.html">ludo.ObjectFactory</a></li><li><a href="ludo.paging.Button.html">ludo.paging.Button</a></li><li><a href="ludo.paging.First.html">ludo.paging.First</a></li><li><a href="ludo.paging.Last.html">ludo.paging.Last</a></li><li><a href="ludo.paging.NavBar.html">ludo.paging.NavBar</a></li><li><a href="ludo.paging.Next.html">ludo.paging.Next</a></li><li><a href="ludo.paging.PageInput.html">ludo.paging.PageInput</a></li><li><a href="ludo.paging.PageSize.html">ludo.paging.PageSize</a></li><li><a href="ludo.paging.TotalPages.html">ludo.paging.TotalPages</a></li><li><a href="ludo.Panel.html">ludo.Panel</a></li><li><a href="ludo.progress.Bar.html">ludo.progress.Bar</a></li><li><a href="ludo.progress.Base.html">ludo.progress.Base</a></li><li><a href="ludo.progress.DataSource.html">ludo.progress.DataSource</a></li><li><a href="ludo.progress.Text.html">ludo.progress.Text</a></li><li><a href="ludo.remote.Broadcaster.html">ludo.remote.Broadcaster</a></li><li><a href="ludo.remote.ErrorMessage.html">ludo.remote.ErrorMessage</a></li><li><a href="ludo.remote.HTML.html">ludo.remote.HTML</a></li><li><a href="ludo.remote.html#.JSON">ludo.remote.JSON</a></li><li><a href="ludo.storage.LocalStorage.html">ludo.storage.LocalStorage</a></li><li><a href="ludo.tpl.Parser.html">ludo.tpl.Parser</a></li><li><a href="ludo.tree.Filter.html">ludo.tree.Filter</a></li><li><a href="ludo.tree.Modifications.html">ludo.tree.Modifications</a></li><li><a href="ludo.tree.Tree.html">ludo.tree.Tree</a></li><li><a href="ludo.video.YouTube.html">ludo.video.YouTube</a></li><li><a href="ludo.View.html">ludo.View</a></li><li><a href="ludo.view.ViewPagerNav.html">ludo.view.ViewPagerNav</a></li><li><a href="ludo.Window.html">ludo.Window</a></li><li><a href="TreeCollectionSearch.html">TreeCollectionSearch</a></li>
				</ul>
			</li>
			
			<li class="dropdown">
				<a href="events.list.html" class="dropdown-toggle" data-toggle="dropdown">Events<b class="caret"></b></a>
				<ul class="dropdown-menu ">
					<li><a href="global.html#event:drag">event:drag</a></li><li><a href="ludo.effect.Drag.html#event:animationComplete">ludo.effect.Drag#event:animationComplete</a></li><li><a href="ludo.effect.Effect.html#event:animationComplete">ludo.effect.Effect#event:animationComplete</a></li>
				</ul>
			</li>
			
		</ul>
        
            <div class="col-sm-3 col-md-3">
                <form class="navbar-form" role="search">
                    <div class="input-group">
                        <input type="text" class="form-control" placeholder="Search" name="q" id="search-input">
                        <div class="input-group-btn">
                            <button class="btn btn-default" id="search-submit"><i class="glyphicon glyphicon-search"></i></button>
                        </div>
                    </div>
                </form>
            </div>
        
	</div>

</div>
</div>


<div class="container" id="toc-content">
<div class="row">

	
	<div class="col-md-12">
	
		<div id="main">
			

		<h1 class="page-title">Source: data-source/collection.js</h1>
    
<section>
    <article>
        <pre
            class="sunlight-highlight-javascript linenums">/**
 Data source collection
 @namespace ludo.dataSource.
 @class ludo.dataSource.Collection
 @augments dataSource.JSON
 @param {Object} config
 @param {Object} config.sortFn custom sort functions, which should return -1 if record a is smaller than
 record b and 1 if record b is larger than record a. Example:
 &lt;code>
 sortFn:{
			'population':{
				'asc' : function(a,b){
					return parseInt(a.population) &lt; parseInt(b.population) ? -1 : 1
				},
				'desc' : function(a,b){
					return parseInt(a.population) > parseInt(b.population) ? -1 : 1
				}
			}
	 	}
 &lt;/code>
 @param {String} config.primaryKey Primary key, example: primaryKey: "id"
 @param {Object} config.paging
 Example:
 &lt;code>
 paging:{
		 	size:10, // Number of rows per page
		  	remotePaging:true, // Load only records per page from server, i.e. new request per page
		  	cache : true, // Store pages in cache, i.e no request if data for page is in cache,
		  	cacheTimeout:30 // Optional time in second before cache is considered out of date, i.e. new server request
		}
 &lt;/code>
 @param {Object} config.searchConfig
 Example:
 &lt;code>
 searchConfig:{
	 		index:['city','country'],
	 		delay:.5
	 	}
 &lt;/code>
 which makes the record keys/columns "city" and "country" searchable. It waits .5 seconds
 before the search is executed. This is useful when searching large collections and you
 want to delay the search until the user has finished entering into a search box.
 @fires ludo.dataSource.Collection#sort Fires on sort. Arguments: {String} sortedBy key
 @fires ludo.dataSource.Collection#add Fires when a new record has been added to the collection. Arguments: {Object} record
 @fires ludo.dataSource.Collection#deselect Fires when a record has been deselected, arguments. {Object} deselected record
 @fires ludo.dataSource.Collection#select Fires when a record has selected, arguments. {Object} selected record
 @fires ludo.dataSource.Collection#delete Fires when a record has been deleted, arguments. {Object} deleted record
 @fires ludo.dataSource.Collection#page Fires on navigation to new page when paging is enabled. Arguments: {Number} page index
 @fires ludo.dataSource.Collection#previousPage Fires when paging is enabled and navigating to current page -1. No arguments
 @fires ludo.dataSource.Collection#nextPage Fires when paging is enabled and navigating to current page +1. No arguments
 @fires ludo.dataSource.Collection#firstPage Fired when navigating to first page.  No arguments
 @fires ludo.dataSource.Collection#lastPage Fired when navigating to last page.  No arguments
 @fires ludo.dataSource.Collection#notLastPage Fired when navigating to a page which is not last page.  No arguments
 @fires ludo.dataSource.Collection#notFirstPage Fired when navigating to a page which is not first page.  No arguments
 @fires ludo.dataSource.Collection#change Fires when data has been updated or page navigation occurs.
 @example
 	dataSource:{
		url:'data-source/grid.php',
		id:'myDataSource',
		paging:{
			size:12,
			remotePaging:false,
			cache:false,
			cacheTimeout:1000
		},
		searchConfig:{
			index:['capital', 'country']
		},
		listeners:{
			select:function (record) {
				console.log(record);
			}
		}
	}
 */
ludo.dataSource.Collection = new Class({
	Extends:ludo.dataSource.JSON,
	sortFn:{},

	selectedRecords:[],

	primaryKey:'id',


	paging:undefined,

	dataCache:{},

	sortedBy:{
		column:undefined,
		order:undefined
	},

	searchConfig:undefined,

	statefulProperties:['sortedBy', 'paging'],

	index:undefined,

	searcherType:'dataSource.CollectionSearch',

	uidMap:{},


	selected:undefined,

	__construct:function (config) {
		this.parent(config);
        this.setConfigParams(config, ['searchConfig','sortFn','primaryKey','sortedBy','paging','selected']);

		if (this.primaryKey &amp;&amp; !ludo.util.isArray(this.primaryKey))this.primaryKey = [this.primaryKey];
		if (this.paging) {
			this.paging.offset = this.paging.offset || 0;
			this.paging.initialOffset = this.paging.offset;
			if (this.paging.initialOffset !== undefined) {
				this.fireEvent('page', (this.paging.initialOffset / this.paging.size) + 1);
			}
			if (this.isCacheEnabled()) {
				this.addEvent('load', this.populateCache.bind(this));
			}
		}

		this.addEvent('parsedata', this.createIndex.bind(this));


		if(this.selected){
			this.addEvent('firstLoad', this.setInitialSelected.bind(this));
		}

		if(this.data &amp;&amp; !this.index)this.createIndex();
	},

	hasRemoteSearch:function(){
		return this.paging &amp;&amp; this.paging.remotePaging;
	},

	setInitialSelected:function(){
		this.selectRecord(this.selected);
	},

	/**
	 * Returns 1) If search is specified: number of records in search result, or 2) number of records in entire collection.
	 * @function getCount
	 * @return {Number} count
	 * @memberof ludo.dataSource.Collection.prototype
	 */
	getCount:function () {
		if (this.paging &amp;&amp; this.paging.rows)return this.paging.rows;
		if (this.searcher &amp;&amp; this.searcher.hasData())return this.searcher.getCount();
		return this.data ? this.data.length : 0;
	},

	isCacheEnabled:function () {
		return this.paging &amp;&amp; this.paging['remotePaging'] &amp;&amp; this.paging.cache;
	},

	/**
	 * Resort data-source
	 * @function sort
	 * @return void
	 * @memberof ludo.dataSource.Collection.prototype
	 */
	sort:function () {
		if (this.sortedBy.column &amp;&amp; this.sortedBy.order) {
			this.sortBy(this.sortedBy.column, this.sortedBy.order);
		}
	},

	/**
	 Set sorted by column
	 @function by
	 @param {String} column
	 @return {dataSource.Collection} this
	 @memberof ludo.dataSource.Collection.prototype
	 @example
	 	collection.by('country').ascending().sort();
	 or
	 @example
	 	collection.by('country').sort();
	 */
	by:function(column){
		this.sortedBy.column = column;
		this.sortedBy.order = this.getSortOrderFor(column);
		return this;
	},
	/**
	 Set sort order to ascending
	 @function ascending
	 @return {dataSource.Collection} this
	 @memberof ludo.dataSource.Collection.prototype
	 @example
	 	collection.by('country').ascending().sort();
	 */
	ascending:function(){
		this.sortedBy.order = 'asc';
		return this;
	},
	/**
	 Set sort order to descending
	 @function descending
	 @return {dataSource.Collection} this
	 @memberof ludo.dataSource.Collection.prototype
	 @example
	 	collection.by('country').descending().sort();
	 */
	descending:function(){
		this.sortedBy.order = 'desc';
		return this;
	},

	/**
	 Sort by column and order

	 The second argument(order) is optional
	 @function sortBy
	 @param {String} column
	 @param {String} order
     @optional
	 @return {dataSource.Collection} this
	 @memberof ludo.dataSource.Collection.prototype
	 @example
	 	grid.getDataSource().sortBy('firstname', 'desc');
	 which also can be written as
	 @example
	 	grid.getDataSource().by('firstname').descending().sort();
	 */
	sortBy:function (column, order) {
        order = order || this.getSortOrderFor(column);

		this.sortedBy = {
			column:column,
			order:order
		};

		if (this.paging) {
			this.paging.offset = this.paging.initialOffset || 0;
			this.fireEvent('page', Math.round(this.paging.offset / this.paging.size) + 1);
		}

		if (this.shouldSortOnServer()) {
			this.loadOrGetFromCache();
		} else {
			var data = this._getData();
			data.sort(this.getSortFnFor(column, order));
			this.fireEvent('change');
		}

		this.fireEvent('sort', this.sortedBy);
        if(this.paging)this.firePageEvents();
		this.fireEvent('state');

		return this;
	},

	/**
	 * Return current sorted by column
	 * @function getSortedBy
	 * @return {String} column
	 * @memberof ludo.dataSource.Collection.prototype
	 */
	getSortedBy:function () {
		return this.sortedBy.column;
	},
	/**
	 * Return current sort order (asc|desc)
	 * @function getSortOrder
	 * @return {String} order
	 * @memberof ludo.dataSource.Collection.prototype
	 */
	getSortOrder:function () {
		return this.sortedBy.order;
	},

	shouldSortOnServer:function () {
		return this.paging &amp;&amp; this.paging.remotePaging;
	},

	getSortFnFor:function (column, order) {
		if (this.sortFn[column] !== undefined) {
			return this.sortFn[column][order];
		}
		if (order === 'asc') {
			return function (a, b) {
				return a[column] + '_' + a[this.primaryKey] &lt; b[column] + '_' + b[this.primaryKey] ? -1 : 1
			};
		} else {
			return function (a, b) {
				return a[column] + '_' + a[this.primaryKey] &lt; b[column] + '_' +  b[this.primaryKey] ? 1 : -1
			};
		}
	},

	getSortOrderFor:function (column) {
		if (this.sortedBy.column === column) {
			return this.sortedBy.order === 'asc' ? 'desc' : 'asc';
		}
		return 'asc';
	},

	/**
	 * Add a record to data-source
	 * @function addRecord
	 * @param record
	 * @return {Object} record
	 * @memberof ludo.dataSource.Collection.prototype
	 */
	addRecord:function (record) {
        this.data = this.data || [];
		this.data.push(record);

		if(!this.index)this.createIndex();

		this.fireEvent('add', record);

		return this.createRecord(record);
	},

	/**
	 * Returns plain object for a record from search. To get a
	 * {{#crossLink "dataSource.Record"}}{{/crossLink}} object
	 * use {{#crossLink "dataSource.Collection/getRecord"}}{{/crossLink}}
	 *
	 * collection.find({ capital : 'Oslo' });
	 *
	 * @function findRecord
	 * @param {Object} search
	 * @return {Object|undefined} record
	 * @memberof ludo.dataSource.Collection.prototype
	 */
	findRecord:function (search) {

		if (!this.data)return undefined;
		if(search['getUID'] !== undefined)search = search.getUID();

		if(search.uid)search = search.uid;
		var rec = this.getById(search);
		if(rec)return rec;

		var searchMethod = ludo.util.isObject(search) ? 'isRecordMatchingSearch' : 'hasMatchInPrimaryKey';


		for (var i = 0; i &lt; this.data.length; i++) {
			if (this[searchMethod](this.data[i], search)) {
				return this.data[i];
			}
		}
		return undefined;
	},

	isRecordMatchingSearch:function (record, search) {
		for (var key in search) {
			if (search.hasOwnProperty(key)) {
				if (record[key] !== search[key]) {
					return false;
				}
			}
		}
		return true;
	},

	hasMatchInPrimaryKey:function(record, search){
		if(this.primaryKey){
			for(var j=0;j&lt;this.primaryKey.length;j++){
				if(record[this.primaryKey[j]]  === search)return true;
			}
		}
		return false;
	},

	/**
	 * Find specific records, example:
	 * var records = collection.findRecords({ country:'Norway'});
	 * @function findRecords
	 * @param {Object} search
	 * @return {Array} records
	 * @memberof ludo.dataSource.Collection.prototype
	 */
	findRecords:function (search) {
		var ret = [];
		for (var i = 0; i &lt; this.data.length; i++) {
			if (this.isRecordMatchingSearch(this.data[i], search)) {
				ret.push(this.data[i]);
			}
		}
		return ret;
	},

    getLinearData:function(){
        return this.data;
    },

	/**
	 * Select the first record matching search
	 * @function selectRecord
	 * @param {Object} search
	 * @return {Object|undefined} record
	 * @memberof ludo.dataSource.Collection.prototype
	 */
	selectRecord:function (search) {
		var rec = this.findRecord(search);
		if (rec) {
			this._setSelectedRecord(rec);
			return rec;
		}
		return undefined;
	},


	/**
	 * Select all records matching search
	 * @function selectRecords
	 * @param {Object} search
	 * @return {Array} records
	 * @memberof ludo.dataSource.Collection.prototype
	 */
	selectRecords:function (search) {
		this.selectedRecords = this.findRecords(search);
		for (var i = 0; i &lt; this.selectedRecords.length; i++) {
			this.fireSelect(this.selectedRecords[i]);
		}
		return this.selectedRecords;
	},

	/**
	 * Select a specific record by index
	 * @function selectRecordIndex
	 * @param {number} index
	 * @memberof ludo.dataSource.Collection.prototype
	 */
	selectRecordIndex:function (index) {
		var data = this._getData();
		if (data.length &amp;&amp; index >= 0 &amp;&amp; index &lt; data.length) {
			var rec = data[index];
			this._setSelectedRecord(rec);
			return rec;
		}
		return undefined;
	},

	_getData:function () {
		if (this.hasSearchResult())return this.searcher.getData();
		return this.data;
	},

	getRecordByIndex:function (index) {
		if (this.data.length &amp;&amp; index >= 0 &amp;&amp; index &lt; this.data.length) {
			return this.data[index];
		}
		return undefined;
	},

	/**
	 * Select previous record. If no record is currently selected, first record will be selected
	 * @function previous
	 * @return {Object} record
	 * @memberof ludo.dataSource.Collection.prototype
	 */
	previous:function () {
		var rec = this.getPreviousOf(this.getSelectedRecord());
		if (rec) {
			this._setSelectedRecord(rec);
		}
		return rec;
	},

	/**
	 * Returns previous record of given record
	 * @function getPreviousOf
	 * @param {Object} record
	 * @return {Object} previous record
	 * @memberof ludo.dataSource.Collection.prototype
	 */
	getPreviousOf:function (record) {
		var data = this._getData();
		if (record) {
			var index = data.indexOf(record);
            return index > 0 ? data[index-1] : undefined;
		} else {
            return data.length > 0 ? data[0] : undefined;
		}
	},

	/**
	 * Select next record. If no record is currently selected, first record will be selected
	 * @function next
	 * @return {Object} record
	 * @memberof ludo.dataSource.Collection.prototype
	 */
	next:function () {
		var rec = this.getNextOf(this.getSelectedRecord());
		if (rec) {
			this._setSelectedRecord(rec);
		}
		return rec;
	},
	/**
	 * Returns next record of given record.
	 * @function getNextOf
	 * @param {Object} record
	 * @return {Object} next record
	 * @memberof ludo.dataSource.Collection.prototype
	 */
	getNextOf:function (record) {
		var data = this._getData();
		if (record) {
			var index = data.indexOf(record);
            return index &lt; data.length - 1 ? data[index+1] : undefined;
		} else {
            return data.length > 0 ? data[0] : undefined;
		}
	},

	_setSelectedRecord:function (rec) {
		if (this.selectedRecords.length) {

			this.fireEvent('deselect', this.selectedRecords[0]);
		}
		this.selectedRecords = [rec];
		this.fireSelect(Object.clone(rec));
	},

	/**
	 * Return first selected record
	 * @function getSelectedRecord
	 * @return {Object|undefined} record
	 * @memberof ludo.dataSource.Collection.prototype
	 */
	getSelectedRecord:function () {
        return this.selectedRecords.length > 0 ? this.selectedRecords[0] : undefined;
	},

	/**
	 * Return selected records
	 * @function getSelectedRecords
	 * @return {Array} records
	 * @memberof ludo.dataSource.Collection.prototype
	 */
	getSelectedRecords:function () {
		return this.selectedRecords;
	},

	/**
	 Delete records matching search,
	 @function deleteRecords
	 @param {Object} search
	 @memberof ludo.dataSource.Collection.prototype
	 @example
	 	grid.getDataSource().deleteRecords({ country: 'Norway' });
	 will delete all records from collection where country is equal to "Norway". A delete event
	 will be fired for each deleted record.
	 */
	deleteRecords:function (search) {
		var records = this.findRecords(search);
		for (var i = 0; i &lt; records.length; i++) {
			this.data.erase(records[i]);
			this.fireEvent('delete', records[i]);
		}
	},
	/**
	 Delete a single record. Deletes first match when
	 multiple matches found.
	 @function deleteRecord
	 @param {Object} search
	 @memberof ludo.dataSource.Collection.prototype
	 @example
	 	grid.getDataSource().deleteRecord({ country: 'Norway' });
	 Will delete first found record where country is equal to Norway. It will fire a
	 delete event if a record is found and deleted.
	 */
	deleteRecord:function (search) {
		var rec = this.findRecord(search);
		if (rec) {
			this.data.erase(rec);

			this.fireEvent('delete', rec);
		}
	},

	/**
	 Select records from current selected record to record matching search,
	 @function selectTo
	 @param {Object} search
	 @memberof ludo.dataSource.Collection.prototype
	 @example
	 	collection.selectRecord({ country: 'Norway' });
	 	collection.selectTo({country: 'Denmark'});
	 	var selectedRecords = collection.getSelectedRecords();
	 */
	selectTo:function (search) {
		var selected = this.getSelectedRecord();
		if (!selected) {
			this.selectRecord(search);
			return;
		}
		var rec = this.findRecord(search);
		if (rec) {
			this.selectedRecords = [];
			var index = this.data.indexOf(rec);
			var indexSelected = this.data.indexOf(selected);
			var i;
			if (index > indexSelected) {
				for (i = indexSelected; i &lt;= index; i++) {
					this.selectedRecords.push(this.data[i]);
					this.fireSelect(this.data[i]);
				}
			} else {
				for (i = indexSelected; i >= index; i--) {
					this.selectedRecords.push(this.data[i]);
					this.fireSelect(this.data[i]);
				}
			}
		}
	},

	/**
	 * Update a record
	 * @function updateRecord
	 * @param {Object} search
	 * @param {Object} updates
	 * @return {dataSource.Record} record
	 * @memberof ludo.dataSource.Collection.prototype
	 */
	updateRecord:function (search, updates) {
		var rec = this.getRecord(search);
		if (rec) {
			rec.setProperties(updates);
		}
		return rec;
	},

	getPostData:function () {
		if (!this.paging) {
			return this.parent();
		}
		var ret = this.postData || {};
		ret._paging = {
			size:this.paging.size,
			offset:this.paging.offset
		};
		ret._sort = this.sortedBy;
		return ret;
	},
	/**
	 * When paging is enabled, go to previous page.
	 * fire previousPage event
	 * @function previousPage
	 * @memberof ludo.dataSource.Collection.prototype
	 */
	previousPage:function () {
		if (!this.paging || this.isOnFirstPage())return;
		this.paging.offset -= this.paging.size;

		this.onPageChange('previousPage');
	},

	/**
	 * When paging is enabled, go to next page
	 * fire nextPage event
	 * @function nextPage
	 * @memberof ludo.dataSource.Collection.prototype
	 */
	nextPage:function () {
		if (!this.paging || this.isOnLastPage())return;
		this.paging.offset += this.paging.size;

		this.onPageChange('nextPage');
	},

	/**
	 * Go to last page
	 * @function lastPage
	 * @memberof ludo.dataSource.Collection.prototype
	 */
	lastPage:function () {
		if (!this.paging || this.isOnLastPage())return;
		var count = this.getCount();
		var decr = count % this.paging.size;
		if(decr === 0) decr = this.paging.size;
		this.paging.offset = count - decr;
		this.onPageChange('lastPage');
	},

	/**
	 * Go to first page
	 * @function firstPage
	 * @memberof ludo.dataSource.Collection.prototype
	 */
	firstPage:function () {
		if (!this.paging || this.isOnFirstPage())return;
		this.paging.offset = 0;

		this.onPageChange('firstPage');
	},

	isOnFirstPage:function () {
		if (!this.paging)return true;
		return this.paging.offset === undefined || this.paging.offset === 0;
	},

	isOnLastPage:function () {
		return this.paging.size + this.paging.offset >= this.getCount();
	},

	onPageChange:function (event) {
		if (this.paging['remotePaging']) {
			this.loadOrGetFromCache();
		}
		this.fireEvent('change');
		this.fireEvent(event);
		this.firePageEvents();
	},

	loadOrGetFromCache:function () {
		if (this.isDataInCache()) {
			this.data = this.dataCache[this.getCacheKey()].data;
			this.fireEvent('change');
		} else {
			this.load();
		}
	},

	populateCache:function () {
		if (this.isCacheEnabled()) {
			this.dataCache[this.getCacheKey()] = {
				data:this.data,
				time:new Date().getTime()
			}
		}
	},

	isDataInCache:function () {
		return this.dataCache[this.getCacheKey()] !== undefined &amp;&amp; !this.isCacheOutOfDate();
	},

    clearCache:function(){
        this.dataCache = {};
    },

	isCacheOutOfDate:function () {
		if (!this.paging['cacheTimeout'])return false;

		var created = this.dataCache[this.getCacheKey()].time;
		return created + (this.paging['cacheTimeout'] * 1000) &lt; (new Date().getTime());
	},

	getCacheKey:function () {
		var keys = [
			'key', this.paging.offset, this.sortedBy.column, this.sortedBy.order
		];
		if (this.searcher !== undefined &amp;&amp; this.searcher.hasData())keys.push(this.searcher.searchToString());
		return keys.join('|');
	},

    hasData:function(){
        return this.data != undefined &amp;&amp; this.data.length > 0;
    },

	firePageEvents:function (skipState) {
		if (this.isOnLastPage()) {

			this.fireEvent('lastPage');
		} else {

			this.fireEvent('notLastPage');
		}

		if (this.isOnFirstPage()) {
			this.fireEvent('firstPage');

		} else {

			this.fireEvent('notFirstPage');
		}

		this.fireEvent('page', this.getPageNumber());
		if (skipState === undefined)this.fireEvent('state');
	},

	/**
	 * Go to a specific page
	 * @function toPage
	 * @param {Number} pageNumber
	 * @return {Boolean} success
	 * @memberof ludo.dataSource.Collection.prototype
	 */
	toPage:function (pageNumber) {
		if (pageNumber > 0 &amp;&amp; pageNumber &lt;= this.getPageCount() &amp;&amp; !this.isOnPage(pageNumber)) {
			this.paging.offset = (pageNumber - 1) * this.paging.size;

			this.onPageChange('toPage');
			return true;
		}
		return false;
	},

	/**
	 * @function setPageSize
	 * @param {Number} size
	 * @memberof ludo.dataSource.Collection.prototype
     */
	setPageSize:function(size){
		if(this.paging){
			this.dataCache = {};
			this.paging.size = parseInt(size);
			this.paging.offset = 0;

			this.onPageChange('toPage');
		}
	},

	/**
	 * True if on given page
	 * @function isOnPage
	 * @param {Number} pageNumber
	 * @return {Boolean}
	 * @memberof ludo.dataSource.Collection.prototype
	 */
	isOnPage:function (pageNumber) {
		return pageNumber == this.getPageNumber();
	},

	/**
	 * Return current page number
	 * @function getPageNumber
	 * @return {Number} page
	 * @memberof ludo.dataSource.Collection.prototype
	 */
	getPageNumber:function () {
        return this.paging ? Math.floor(this.paging.offset / this.paging.size) + 1 : 1;
	},

	/**
	 * Return number of pages
	 * @function getPageCount
	 * @return {Number}
	 * @memberof ludo.dataSource.Collection.prototype
	 */
	getPageCount:function () {
        return this.paging ? Math.ceil(this.getCount() / this.paging.size) : 1;
	},

	/**
	 * Return data in collection
	 * @function getData
	 * @memberof ludo.dataSource.Collection.prototype
	 * @returns {Array}
     */
	getData:function () {
		if (this.hasSearchResult()){
			if (this.paging &amp;&amp; this.paging.size) {
				return this.getDataForPage(this.searcher.getData());
			}
			return this.searcher.getData();
		}
		if (!this.paging || this.paging.remotePaging) {
			return this.parent();
		}
		return this.getDataForPage(this.data);
	},


	getDataForPage:function (data) {
		if (!data || data.length == 0)return [];
		var offset = this.paging.initialOffset || this.paging.offset;
		if (offset > data.length) {
			this.toPage(this.getPageCount());
			offset = (this.getPageCount() - 1) * this.paging.size;
		}
		this.resetInitialOffset.delay(200, this);
		return data.slice(offset, Math.min(data.length, offset + this.paging.size));
	},

	resetInitialOffset:function () {
		this.paging.initialOffset = undefined;
	},

	loadComplete:function (data, json) {
		// TODO refactor this
		if (this.paging &amp;&amp; json.rows !==undefined)this.paging.rows = json.rows;
		if (this.paging &amp;&amp; json.response &amp;&amp; json.response.rows !==undefined)this.paging.rows = json.response.rows;
		this.parent(data, json);

		this.fireEvent('count', this.getCount());
		if (this.shouldSortAfterLoad()) {
			this.sort();
		} else {
			this.fireEvent('change');
		}
		if (this.paging !== undefined) {
			this.firePageEvents(true);
		}
	},

	createIndex:function () {
		this.index = {};
		this.indexBranch(this.data);
	},

	indexBranch:function(branch, parent){
		for (var i = 0; i &lt; branch.length; i++) {
			this.indexRecord(branch[i], parent);
			if(branch[i].children &amp;&amp; branch[i].children.length)this.indexBranch(branch[i].children, branch[i]);
		}
	},

	indexRecord:function(record, parent){
		if(!this.index)this.createIndex();
		if(parent)record.parentUid = parent.uid;
		var pk = this.getPrimaryKeyIndexFor(record);
		if(pk)this.index[pk] = record;
		if(!record.uid)record.uid = ['uid_', String.uniqueID()].join('');
		this.index[record.uid] = record;
	},

	shouldSortAfterLoad:function(){
		if(this.paging &amp;&amp; this.paging.remotePaging)return false;
		return this.sortedBy !== undefined &amp;&amp; this.sortedBy.column &amp;&amp; this.sortedBy.order;
	},

	/**
	 Filter collection based on given search term. To filter on multiple search terms, you should
	 get a reference to the {{#crossLink "dataSource.CollectionSearch"}}{{/crossLink}} object and
	 use the available {{#crossLink "dataSource.CollectionSearch"}}{{/crossLink}} methods to add
	 multiple search terms.
	 @function Search
	 @param {String} search
	 @memberof ludo.dataSource.Collection.prototype
	 @example
	 	ludo.get('myCollection').search('New York');
	 	// or with the {{#crossLink "dataSource.CollectionSearch/add"}}{{/crossLink}} method
	 	var searcher = ludo.get('myCollection').getSearcher();
	 	searcher.where('New York').execute();
	 	searcher.execute();
	 */
	search:function (search) {
		this.getSearcher().search(search);
	},

	/**
	 * Executes a remote search for records with the given data
	 * @function remoteSearch
	 * @param {String|Object} search
	 * @memberof ludo.dataSource.Collection.prototype
	 */
	remoteSearch:function(search){
		this.postData = this.postData || {};
		this.postData.search = search;
		this.toPage(1);
		this.load();
	},

	afterSearch:function(){
		var searcher = this.getSearcher();
		this.fireEvent('count', searcher.hasData() ? searcher.getCount() : this.getCount());
		if (this.paging !== undefined) {
			this.paging.offset = 0;
			this.firePageEvents(true);
			this.fireEvent('pageCount', this.getPageCount());
		}
		this.fireEvent('change');
	},

	searcher:undefined,
	/**
	 * Returns a {{#crossLink "dataSource.CollectionSearch"}}{{/crossLink}} object which
	 * you can use to filter a collection.
	 * @function getSearcher
	 * @return {dataSource.CollectionSearch}
	 * @memberof ludo.dataSource.Collection.prototype
	 */
	getSearcher:function () {
		if (this.searcher === undefined) {
			this.searchConfig = this.searchConfig || {};
			var config = Object.merge({
				type:this.searcherType,
				dataSource:this
			}, this.searchConfig);
			this.searcher = ludo._new(config);
			this.addSearcherEvents();
		}
		return this.searcher;
	},

	addSearcherEvents:function(){
		this.searcher.addEvent('search', this.afterSearch.bind(this));
		this.searcher.addEvent('deleteSearch', this.afterSearch.bind(this));
	},

	hasSearchResult:function(){
		return this.searcher !== undefined &amp;&amp; this.searcher.hasData();
	},
	/**
	 Return record by id or undefined if not found. Records are indexed by id. This method
	 gives you quick access to a record by it's id. The method returns a reference to the
	 actual record. You can use Object.clone(record) to create a copy of it in case you
	 want to update the record but not make those changes to the collection.
	 @function getById
	 @param {String|Number|Object} id
	 @return {Object} record
	 @memberof ludo.dataSource.Collection.prototype
	 @example
	 	var collection = new ludo.dataSource.Collection({
	 		url : 'get-countries.php',
	 		primaryKey:'country'
	 	});
	 	var record = collection.getById('Japan'); // Returns record for Japan if it exists.
	 You can also define multiple keys as id
	 @example
		 var collection = new ludo.dataSource.Collection({
			url : 'get-countries.php',
			primaryKey:['id', 'country']
		 });
	   	 var record = collection.getById({ id:1, country:'Japan' });
	 This is especially useful when you have a {{#crossLink "dataSource.TreeCollection"}}{{/crossLink}}
	 where child nodes may have same numeric id as it's parent.
	 @example
	 	{ id:1, type:'country', title : 'Japan',
	 	 	children:[ { id:1, type:'city', title:'Tokyo }]
	 By setting primaryKey to ['id', 'type'] will make it possible to distinguish between countries and cities.
	 */
	getById:function(id){
		if(this.index[id] !== undefined){
			return this.index[id];
		}

		if(this.primaryKey.length===1){
			return this.index[id];
		}else{
			var key = [];
			for(var i=0;i&lt;this.primaryKey.length;i++){
				key.push(id[this.primaryKey[i]]);
			}
			return this.index[key.join('')];
		}
	},

	recordObjects:{},

	/**
	 Returns {{#crossLink "dataSource.Record"}}{{/crossLink}} object for a record.
	 If you want to update a record, you should
	 first get a reference to {{#crossLink "dataSource.Record"}}{{/crossLink}} and then call one
	 of it's methods.
	 @function getRecord
	 @param {String|Object} search
	 @return {dataSource.Record|undefined}
	 @memberof ludo.dataSource.Collection.prototype
	 @example
		 var collection = new ludo.dataSource.Collection({
			url : 'get-countries.php',
			primaryKey:'country'
		 });
	 	 collection.getRecord('Japan').set('capital', 'tokyo');
	 */
	getRecord:function(search){
		var rec = this.findRecord(search);
		if(rec){
			return this.createRecord(rec);
		}
		return undefined;
	},

	createRecord:function(data){
		var id = data.uid;
		if(!this.recordObjects[id]){
			this.recordObjects[id] = this.recordInstance(data, this);
			this.addRecordEvents(this.recordObjects[id]);
		}
		return this.recordObjects[id];
	},

    recordInstance:function(data){
        return new ludo.dataSource.Record(data, this);
    },

	addRecordEvents:function(record){
		record.addEvent('update', this.onRecordUpdate.bind(this));
		record.addEvent('remove', this.onRecordDispose.bind(this));
		record.addEvent('select', this.selectRecord.bind(this));
	},

    fireSelect:function(record){
        this.fireEvent('select', record);
    },

	onRecordUpdate:function(record){
		this.indexRecord(record);
		this.fireEvent('update', record);
	},

	onRecordDispose:function(record){
		var branch = this.getBranchFor(record);
		if(branch){
			var index = branch.indexOf(record);
			if(index !== -1){
				branch.splice(index,1);
			}
			this.removeFromIndex(record);
			this.fireEvent('remove', record);
		}
	},

	getBranchFor:function(record){
		if(record.parentUid){
			var parent = this.findRecord(record.parentUid);
			return parent ? parent.children : undefined;
		}else{
			return this.data;
		}
	},

	removeFromIndex:function(record){
		this.recordObjects[record.uid] = undefined;
		this.index[record.uid] = undefined;
		var pk = this.getPrimaryKeyIndexFor(record);
		if(pk)this.index[pk] = undefined;
	},

	getPrimaryKeyIndexFor:function(record){
		if(this.primaryKey){
			var key = [];
			for(var j=0;j&lt;this.primaryKey.length;j++){
				key.push(record[this.primaryKey[j]]);
			}
			return key.join('');
		}
		return undefined;
	}
});

ludo.factory.registerClass('dataSource.Collection', ludo.dataSource.Collection);</pre>
    </article>
</section>





		</div>
	</div>

	<div class="clearfix"></div>

	

</div>
</div>


    <div class="modal fade" id="searchResults">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title">Search results</h4>
          </div>
          <div class="modal-body"></div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          </div>
        </div><!-- /.modal-content -->
      </div><!-- /.modal-dialog -->
    </div>


<footer>


	<span class="copyright">
	© LudoJS.com 2012-2016
	</span>

<span class="jsdoc-message">
	Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.2</a>
	
		on Tue Nov 29th 2016
	
	using the <a href="https://github.com/docstrap/docstrap">DocStrap template</a>.
</span>
</footer>

<script src="scripts/docstrap.lib.js"></script>
<script src="scripts/toc.js"></script>

    <script type="text/javascript" src="scripts/fulltext-search-ui.js"></script>


<script>
$( function () {
	$( "[id*='$']" ).each( function () {
		var $this = $( this );

		$this.attr( "id", $this.attr( "id" ).replace( "$", "__" ) );
	} );

	$( ".tutorial-section pre, .readme-section pre, pre.prettyprint.source" ).each( function () {
		var $this = $( this );

		var example = $this.find( "code" );
		exampleText = example.html();
		var lang = /{@lang (.*?)}/.exec( exampleText );
		if ( lang && lang[1] ) {
			exampleText = exampleText.replace( lang[0], "" );
			example.html( exampleText );
			lang = lang[1];
		} else {
			var langClassMatch = example.parent()[0].className.match(/lang\-(\S+)/);
			lang = langClassMatch ? langClassMatch[1] : "javascript";
		}

		if ( lang ) {

			$this
			.addClass( "sunlight-highlight-" + lang )
			.addClass( "linenums" )
			.html( example.html() );

		}
	} );

	Sunlight.highlightAll( {
		lineNumbers : true,
		showMenu : true,
		enableDoclinks : true
	} );

	$.catchAnchorLinks( {
        navbarOffset: 10
	} );
	$( "#toc" ).toc( {
		anchorName  : function ( i, heading, prefix ) {
			return $( heading ).attr( "id" ) || ( prefix + i );
		},
		selectors   : "#toc-content h1,#toc-content h2,#toc-content h3,#toc-content h4",
		showAndHide : false,
		smoothScrolling: true
	} );

	$( "#main span[id^='toc']" ).addClass( "toc-shim" );
	$( '.dropdown-toggle' ).dropdown();

    $( "table" ).each( function () {
      var $this = $( this );
      $this.addClass('table');
    } );

} );
</script>



<!--Navigation and Symbol Display-->


<!--Google Analytics-->

<script>
	(function ( i, s, o, g, r, a, m ) {
		i['GoogleAnalyticsObject'] = r;
		i[r] = i[r] || function () {
			(i[r].q = i[r].q || []).push( arguments )
		}, i[r].l = 1 * new Date();
		a = s.createElement( o ),
			m = s.getElementsByTagName( o )[0];
		a.async = 1;
		a.src = g;
		m.parentNode.insertBefore( a, m )
	})( window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga' );

	ga( 'create', 'UA-34153510-1', 'http://www.ludojs.com' );
	ga( 'send', 'pageview' );
</script>



    <script type="text/javascript">
        $(document).ready(function() {
            SearcherDisplay.init();
        });
    </script>


</body>
</html>
