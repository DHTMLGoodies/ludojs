<!DOCTYPE html>

<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width">
	<title>LudoJS Source: data-source/collection.js</title>

	<!--[if lt IE 9]>
	<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->
	<link type="text/css" rel="stylesheet" href="styles/sunlight.default.css">

	<link type="text/css" rel="stylesheet" href="styles/site.ludojs.css">

</head>

<body>

<div class="navbar navbar-default navbar-fixed-top navbar-inverse">
<div class="container">
	<div class="navbar-header">
		<a class="navbar-brand" href="index.html">LudoJS</a>
		<button class="navbar-toggle" type="button" data-toggle="collapse" data-target="#topNavigation">
			<span class="icon-bar"></span>
			<span class="icon-bar"></span>
			<span class="icon-bar"></span>
        </button>
	</div>
	<div class="navbar-collapse collapse" id="topNavigation">
		<ul class="nav navbar-nav">
			
			<li class="dropdown">
				<a href="namespaces.list.html" class="dropdown-toggle" data-toggle="dropdown">Namespaces<b class="caret"></b></a>
				<ul class="dropdown-menu ">
					<li><a href="remote.html">remote</a></li>
				</ul>
			</li>
			
			<li class="dropdown">
				<a href="modules.list.html" class="dropdown-toggle" data-toggle="dropdown">Modules<b class="caret"></b></a>
				<ul class="dropdown-menu ">
					<li><a href="module-language.html">language</a></li><li><a href="module-ludo.html">ludo</a></li>
				</ul>
			</li>
			
			<li class="dropdown">
				<a href="classes.list.html" class="dropdown-toggle" data-toggle="dropdown">Classes<b class="caret"></b></a>
				<ul class="dropdown-menu ">
					<li><a href="ludo.Application.html">ludo.Application</a></li><li><a href="ludo.calendar.Base.html">ludo.calendar.Base</a></li><li><a href="ludo.calendar.Calendar.html">ludo.calendar.Calendar</a></li><li><a href="ludo.calendar.Days.html">ludo.calendar.Days</a></li><li><a href="ludo.calendar.MonthSelector.html">ludo.calendar.MonthSelector</a></li><li><a href="ludo.calendar.MonthYearSelector.html">ludo.calendar.MonthYearSelector</a></li><li><a href="ludo.calendar.NavBar.html">ludo.calendar.NavBar</a></li><li><a href="ludo.calendar.TimePicker.html">ludo.calendar.TimePicker</a></li><li><a href="ludo.calendar.Today.html">ludo.calendar.Today</a></li><li><a href="ludo.calendar.YearSelector.html">ludo.calendar.YearSelector</a></li><li><a href="ludo.canvas.Canvas.html">ludo.canvas.Canvas</a></li><li><a href="ludo.canvas.Circle.html">ludo.canvas.Circle</a></li><li><a href="ludo.canvas.Curtain.html">ludo.canvas.Curtain</a></li><li><a href="ludo.canvas.Drag.html">ludo.canvas.Drag</a></li><li><a href="ludo.canvas.Ellipse.html">ludo.canvas.Ellipse</a></li><li><a href="ludo.canvas.Filter.html">ludo.canvas.Filter</a></li><li><a href="ludo.canvas.Gradient.html">ludo.canvas.Gradient</a></li><li><a href="ludo.canvas.Group.html">ludo.canvas.Group</a></li><li><a href="ludo.canvas.Mask.html">ludo.canvas.Mask</a></li><li><a href="ludo.canvas.NamedNode.html">ludo.canvas.NamedNode</a></li><li><a href="ludo.canvas.Node.html">ludo.canvas.Node</a></li><li><a href="ludo.canvas.Paint.html">ludo.canvas.Paint</a></li><li><a href="ludo.canvas.Path.html">ludo.canvas.Path</a></li><li><a href="ludo.canvas.Polygon.html">ludo.canvas.Polygon</a></li><li><a href="ludo.canvas.Polyline.html">ludo.canvas.Polyline</a></li><li><a href="ludo.canvas.RadialGradient.html">ludo.canvas.RadialGradient</a></li><li><a href="ludo.canvas.Rect.html">ludo.canvas.Rect</a></li><li><a href="ludo.canvas.Stop.html">ludo.canvas.Stop</a></li><li><a href="ludo.canvas.Text.html">ludo.canvas.Text</a></li><li><a href="ludo.canvas.TextBox.html">ludo.canvas.TextBox</a></li><li><a href="ludo.canvas.View.html">ludo.canvas.View</a></li><li><a href="ludo.chart.DataProvider.html">ludo.chart.DataProvider</a></li><li><a href="ludo.chart.Labels.html">ludo.chart.Labels</a></li><li><a href="ludo.chart.Pie.html">ludo.chart.Pie</a></li><li><a href="ludo.chart.PieSliceHighlighted.html">ludo.chart.PieSliceHighlighted</a></li><li><a href="ludo.chart.Record.html">ludo.chart.Record</a></li><li><a href="ludo.CollectionView.html">ludo.CollectionView</a></li><li><a href="ludo.color.Color.html">ludo.color.Color</a></li><li><a href="ludo.controller.Controller.html">ludo.controller.Controller</a></li><li><a href="ludo.controller.Manager.html">ludo.controller.Manager</a></li><li><a href="ludo.Core.html">ludo.Core</a></li><li><a href="ludo.dataSource.Collection.html">ludo.dataSource.Collection</a></li><li><a href="ludo.dataSource.CollectionSearch.html">ludo.dataSource.CollectionSearch</a></li><li><a href="ludo.dataSource.HTML.html">ludo.dataSource.HTML</a></li><li><a href="ludo.dataSource.JSON.html">ludo.dataSource.JSON</a></li><li><a href="ludo.dataSource.Record.html">ludo.dataSource.Record</a></li><li><a href="ludo.dataSource.SearchParser.html">ludo.dataSource.SearchParser</a></li><li><a href="ludo.dataSource.TreeCollection.html">ludo.dataSource.TreeCollection</a></li><li><a href="ludo.dialog.Alert.html">ludo.dialog.Alert</a></li><li><a href="ludo.dialog.Confirm.html">ludo.dialog.Confirm</a></li><li><a href="ludo.dialog.Dialog.html">ludo.dialog.Dialog</a></li><li><a href="ludo.dialog.Prompt.html">ludo.dialog.Prompt</a></li><li><a href="ludo.dom.html">ludo.dom</a></li><li><a href="ludo.effect.Drag.html">ludo.effect.Drag</a></li><li><a href="ludo.effect.DragDrop.html">ludo.effect.DragDrop</a></li><li><a href="ludo.effect.DropPoint.html">ludo.effect.DropPoint</a></li><li><a href="ludo.effect.Effect.html">ludo.effect.Effect</a></li><li><a href="ludo.form.Button.html">ludo.form.Button</a></li><li><a href="ludo.form.CancelButton.html">ludo.form.CancelButton</a></li><li><a href="ludo.form.Checkbox.html">ludo.form.Checkbox</a></li><li><a href="ludo.form.Combo.html">ludo.form.Combo</a></li><li><a href="ludo.form.ComboTree.html">ludo.form.ComboTree</a></li><li><a href="ludo.form.Date.html">ludo.form.Date</a></li><li><a href="ludo.form.DisplayField.html">ludo.form.DisplayField</a></li><li><a href="ludo.form.Element.html">ludo.form.Element</a></li><li><a href="ludo.form.Email.html">ludo.form.Email</a></li><li><a href="ludo.form.File.html">ludo.form.File</a></li><li><a href="ludo.form.FilterText.html">ludo.form.FilterText</a></li><li><a href="ludo.form.Label.html">ludo.form.Label</a></li><li><a href="ludo.form.Manager.html">ludo.form.Manager</a></li><li><a href="ludo.form.Number.html">ludo.form.Number</a></li><li><a href="ludo.form.OnOffSwitch.html">ludo.form.OnOffSwitch</a></li><li><a href="ludo.form.Password.html">ludo.form.Password</a></li><li><a href="ludo.form.Radio.html">ludo.form.Radio</a></li><li><a href="ludo.form.RadioGroup.html">ludo.form.RadioGroup</a></li><li><a href="ludo.form.ResetButton.html">ludo.form.ResetButton</a></li><li><a href="ludo.form.SearchField.html">ludo.form.SearchField</a></li><li><a href="ludo.form.Seekbar.html">ludo.form.Seekbar</a></li><li><a href="ludo.form.Select.html">ludo.form.Select</a></li><li><a href="ludo.form.Spinner.html">ludo.form.Spinner</a></li><li><a href="ludo.form.StrongPassword.html">ludo.form.StrongPassword</a></li><li><a href="ludo.form.SubmitButton.html">ludo.form.SubmitButton</a></li><li><a href="ludo.form.Text.html">ludo.form.Text</a></li><li><a href="ludo.form.Textarea.html">ludo.form.Textarea</a></li><li><a href="ludo.form.TinbyButton.html">ludo.form.TinbyButton</a></li><li><a href="ludo.form.ToggleButton.html">ludo.form.ToggleButton</a></li><li><a href="ludo.form.ToggleGroup.html">ludo.form.ToggleGroup</a></li><li><a href="ludo.form.validator.Base.html">ludo.form.validator.Base</a></li><li><a href="ludo.form.validator.Md5.html">ludo.form.validator.Md5</a></li><li><a href="ludo.FramedView.html">ludo.FramedView</a></li><li><a href="ludo.grid.ColumnManager.html">ludo.grid.ColumnManager</a></li><li><a href="ludo.grid.Grid.html">ludo.grid.Grid</a></li><li><a href="ludo.layout.Accordion.html">ludo.layout.Accordion</a></li><li><a href="ludo.layout.Base.html">ludo.layout.Base</a></li><li><a href="ludo.layout.Canvas.html">ludo.layout.Canvas</a></li><li><a href="ludo.layout.Factory.html">ludo.layout.Factory</a></li><li><a href="ludo.layout.Grid.html">ludo.layout.Grid</a></li><li><a href="ludo.layout.LinearVertical.html">ludo.layout.LinearVertical</a></li><li><a href="ludo.layout.Menu.html">ludo.layout.Menu</a></li><li><a href="ludo.layout.NavBar.html">ludo.layout.NavBar</a></li><li><a href="ludo.layout.Popup.html">ludo.layout.Popup</a></li><li><a href="ludo.layout.Relative.html">ludo.layout.Relative</a></li><li><a href="ludo.layout.Renderer.html">ludo.layout.Renderer</a></li><li><a href="ludo.layout.Table.html">ludo.layout.Table</a></li><li><a href="ludo.layout.ViewPager.html">ludo.layout.ViewPager</a></li><li><a href="ludo.menu.Button.html">ludo.menu.Button</a></li><li><a href="ludo.menu.Context.html">ludo.menu.Context</a></li><li><a href="ludo.menu.DropDown.html">ludo.menu.DropDown</a></li><li><a href="ludo.menu.Menu.html">ludo.menu.Menu</a></li><li><a href="ludo.menu.MenuItem.html">ludo.menu.MenuItem</a></li><li><a href="ludo.Notification.html">ludo.Notification</a></li><li><a href="ludo.ObjectFactory.html">ludo.ObjectFactory</a></li><li><a href="ludo.paging.Button.html">ludo.paging.Button</a></li><li><a href="ludo.paging.First.html">ludo.paging.First</a></li><li><a href="ludo.paging.Last.html">ludo.paging.Last</a></li><li><a href="ludo.paging.NavBar.html">ludo.paging.NavBar</a></li><li><a href="ludo.paging.Next.html">ludo.paging.Next</a></li><li><a href="ludo.paging.PageInput.html">ludo.paging.PageInput</a></li><li><a href="ludo.paging.PageSize.html">ludo.paging.PageSize</a></li><li><a href="ludo.paging.TotalPages.html">ludo.paging.TotalPages</a></li><li><a href="ludo.Panel.html">ludo.Panel</a></li><li><a href="ludo.progress.Bar.html">ludo.progress.Bar</a></li><li><a href="ludo.progress.Base.html">ludo.progress.Base</a></li><li><a href="ludo.progress.DataSource.html">ludo.progress.DataSource</a></li><li><a href="ludo.progress.Text.html">ludo.progress.Text</a></li><li><a href="ludo.remote.ErrorMessage.html">ludo.remote.ErrorMessage</a></li><li><a href="ludo.remote.html#.JSON">ludo.remote.JSON</a></li><li><a href="ludo.remote.Message.html">ludo.remote.Message</a></li><li><a href="ludo.storage.LocalStorage.html">ludo.storage.LocalStorage</a></li><li><a href="ludo.tpl.Parser.html">ludo.tpl.Parser</a></li><li><a href="ludo.tree.Filter.html">ludo.tree.Filter</a></li><li><a href="ludo.tree.Modifications.html">ludo.tree.Modifications</a></li><li><a href="ludo.tree.Tree.html">ludo.tree.Tree</a></li><li><a href="ludo.video.YouTube.html">ludo.video.YouTube</a></li><li><a href="ludo.View.html">ludo.View</a></li><li><a href="ludo.view.ViewPagerNav.html">ludo.view.ViewPagerNav</a></li><li><a href="ludo.Window.html">ludo.Window</a></li><li><a href="TreeCollectionSearch.html">TreeCollectionSearch</a></li>
				</ul>
			</li>
			
			<li class="dropdown">
				<a href="events.list.html" class="dropdown-toggle" data-toggle="dropdown">Events<b class="caret"></b></a>
				<ul class="dropdown-menu ">
					<li><a href="global.html#event:activate">event:activate</a></li><li><a href="global.html#event:add">event:add</a></li><li><a href="global.html#event:addChild">event:addChild</a></li><li><a href="global.html#event:animationComplete">event:animationComplete</a></li><li><a href="global.html#event:beforeload">event:beforeload</a></li><li><a href="global.html#event:beforeshow">event:beforeshow</a></li><li><a href="global.html#event:blur">event:blur</a></li><li><a href="global.html#event:change">event:change</a></li><li><a href="global.html#event:clean">event:clean</a></li><li><a href="global.html#event:click">event:click</a></li><li><a href="global.html#event:createNode">event:createNode</a></li><li><a href="global.html#event:delete">event:delete</a></li><li><a href="global.html#event:deselect">event:deselect</a></li><li><a href="global.html#event:dirty">event:dirty</a></li><li><a href="global.html#event:drag">event:drag</a></li><li><a href="global.html#event:drop">event:drop</a></li><li><a href="global.html#event:east">event:east</a></li><li><a href="global.html#event:enterDropTarget">event:enterDropTarget</a></li><li><a href="global.html#event:failure">event:failure</a></li><li><a href="global.html#event:firstPage">event:firstPage</a></li><li><a href="global.html#event:firstpage">event:firstpage</a></li><li><a href="global.html#event:focus">event:focus</a></li><li><a href="global.html#event:hide">event:hide</a></li><li><a href="global.html#event:hidecolumn">event:hidecolumn</a></li><li><a href="global.html#event:higherpage">event:higherpage</a></li><li><a href="global.html#event:invalid">event:invalid</a></li><li><a href="global.html#event:invalidDropTarget">event:invalidDropTarget</a></li><li><a href="global.html#event:key">event:key</a></li><li><a href="global.html#event:key_down">event:key_down</a></li><li><a href="global.html#event:key_press">event:key_press</a></li><li><a href="global.html#event:key_up">event:key_up</a></li><li><a href="global.html#event:lastpage">event:lastpage</a></li><li><a href="global.html#event:lastPage">event:lastPage</a></li><li><a href="global.html#event:loadValue">event:loadValue</a></li><li><a href="global.html#event:lowercasenameofbuttonwithwhitespaceremoved">event:lowercase name of button with white space removed</a></li><li><a href="global.html#event:lowerpage">event:lowerpage</a></li><li><a href="global.html#event:movecolumn">event:movecolumn</a></li><li><a href="global.html#event:nextPage">event:nextPage</a></li><li><a href="global.html#event:north">event:north</a></li><li><a href="global.html#event:notFirstPage">event:notFirstPage</a></li><li><a href="global.html#event:notfirstpage">event:notfirstpage</a></li><li><a href="global.html#event:notlastpage">event:notlastpage</a></li><li><a href="global.html#event:notLastPage">event:notLastPage</a></li><li><a href="global.html#event:off">event:off</a></li><li><a href="global.html#event:on">event:on</a></li><li><a href="global.html#event:page">event:page</a></li><li><a href="global.html#event:previousPage">event:previousPage</a></li><li><a href="global.html#event:render">event:render</a></li><li><a href="global.html#event:resize">event:resize</a></li><li><a href="global.html#event:search">event:search</a></li><li><a href="global.html#event:select">event:select</a></li><li><a href="global.html#event:send">event:send</a></li><li><a href="global.html#event:servererror">event:servererror</a></li><li><a href="global.html#event:show">event:show</a></li><li><a href="global.html#event:showMessage">event:showMessage</a></li><li><a href="global.html#event:showpage">event:showpage</a></li><li><a href="global.html#event:sort">event:sort</a></li><li><a href="global.html#event:south">event:south</a></li><li><a href="global.html#event:start">event:start</a></li><li><a href="global.html#event:toPage">event:toPage</a></li><li><a href="global.html#event:valid">event:valid</a></li><li><a href="global.html#event:validDropTarget">event:validDropTarget</a></li><li><a href="global.html#event:valueChange">event:valueChange</a></li><li><a href="global.html#event:west">event:west</a></li><li><a href="ludo.calendar.TimePicker.html#event:mode">ludo.calendar.TimePicker#event:mode</a></li><li><a href="ludo.calendar.TimePicker.html#event:time">ludo.calendar.TimePicker#event:time</a></li>
				</ul>
			</li>
			
			<li class="dropdown">
				<a href="global.html" class="dropdown-toggle" data-toggle="dropdown">Global<b class="caret"></b></a>
				<ul class="dropdown-menu ">
					<li><a href="global.html#__construct">__construct</a></li><li><a href="global.html#add">add</a></li><li><a href="global.html#addChild">addChild</a></li><li><a href="global.html#addDropTarget">addDropTarget</a></li><li><a href="global.html#addFeMergeNode">addFeMergeNode</a></li><li><a href="global.html#addOns">addOns</a></li><li><a href="global.html#addOption">addOption</a></li><li><a href="global.html#addRecord">addRecord</a></li><li><a href="global.html#addResourceEvent">addResourceEvent</a></li><li><a href="global.html#addStop">addStop</a></li><li><a href="global.html#appendDef">appendDef</a></li><li><a href="global.html#applyTo">applyTo</a></li><li><a href="global.html#ascending">ascending</a></li><li><a href="global.html#assignDefaultCoordinates">assignDefaultCoordinates</a></li><li><a href="global.html#autoComplete">autoComplete</a></li><li><a href="global.html#broadcast">broadcast</a></li><li><a href="global.html#by">by</a></li><li><a href="global.html#captureRegions">captureRegions</a></li><li><a href="global.html#childLayout">childLayout</a></li><li><a href="global.html#clearCacheStylesClearcachedpadding,borderandmargins.">clearCacheStyles
Clear cached padding,border and margins.</a></li><li><a href="global.html#clearTemporaryValues">clearTemporaryValues</a></li><li><a href="global.html#click">click</a></li><li><a href="global.html#close">close</a></li><li><a href="global.html#config">config</a></li><li><a href="global.html#createResizeFunctions">createResizeFunctions</a></li><li><a href="global.html#dataProvider">dataProvider</a></li><li><a href="global.html#dataSource">dataSource</a></li><li><a href="global.html#date">date</a></li><li><a href="global.html#delay">delay</a></li><li><a href="global.html#deleteRecord">deleteRecord</a></li><li><a href="global.html#deleteRecords">deleteRecords</a></li><li><a href="global.html#descending">descending</a></li><li><a href="global.html#disable">disable</a></li><li><a href="global.html#disabled">disabled</a></li><li><a href="global.html#disableModRewriteUrls">disableModRewriteUrls</a></li><li><a href="global.html#emptyItem">emptyItem</a></li><li><a href="global.html#emptyText">emptyText</a></li><li><a href="global.html#enable">enable</a></li><li><a href="global.html#enableModRewriteUrls">enableModRewriteUrls</a></li><li><a href="global.html#eventKeys">eventKeys</a></li><li><a href="global.html#findRecord">findRecord</a></li><li><a href="global.html#findRecords">findRecords</a></li><li><a href="global.html#finish">finish</a></li><li><a href="global.html#fire">fire</a></li><li><a href="global.html#fixLayoutReferences">fixLayoutReferences</a></li><li><a href="global.html#fly">fly</a></li><li><a href="global.html#flyBack">flyBack</a></li><li><a href="global.html#flyTo">flyTo</a></li><li><a href="global.html#formCss">formCss</a></li><li><a href="global.html#get">get</a></li><li><a href="global.html#getAlignmentFn">getAlignmentFn</a></li><li><a href="global.html#getBH">getBH</a></li><li><a href="global.html#getBW">getBW</a></li><li><a href="global.html#getById">getById</a></li><li><a href="global.html#getCenter">getCenter</a></li><li><a href="global.html#getCheckedRadio">getCheckedRadio</a></li><li><a href="global.html#getChildren">getChildren</a></li><li><a href="global.html#getClassName">getClassName</a></li><li><a href="global.html#getCompiled">getCompiled</a></li><li><a href="global.html#getCount">getCount</a></li><li><a href="global.html#getCountPages">getCountPages</a></li><li><a href="global.html#getCy">getCy</a></li><li><a href="global.html#getDate">getDate</a></li><li><a href="global.html#getDefs">getDefs</a></li><li><a href="global.html#getDocumentRoot">getDocumentRoot</a></li><li><a href="global.html#getEl()">getEl()</a></li><li><a href="global.html#getFieldWidth">getFieldWidth</a></li><li><a href="global.html#getFileUploadUrl">getFileUploadUrl</a></li><li><a href="global.html#getFormEl">getFormEl</a></li><li><a href="global.html#getGroupFor">getGroupFor</a></li><li><a href="global.html#getGroupIdOf">getGroupIdOf</a></li><li><a href="global.html#getHeight">getHeight</a></li><li><a href="global.html#getIndexOfVisiblePage">getIndexOfVisiblePage</a></li><li><a href="global.html#getLastLayoutFn">getLastLayoutFn</a></li><li><a href="global.html#getLayoutFn">getLayoutFn</a></li><li><a href="global.html#getLayoutFnsFor">getLayoutFnsFor</a></li><li><a href="global.html#getManager">getManager</a></li><li><a href="global.html#getMeasuredWidth">getMeasuredWidth</a></li><li><a href="global.html#getMH">getMH</a></li><li><a href="global.html#getMW">getMW</a></li><li><a href="global.html#getNextOf">getNextOf</a></li><li><a href="global.html#getOffset">getOffset</a></li><li><a href="global.html#getPageCount">getPageCount</a></li><li><a href="global.html#getPageNumber">getPageNumber</a></li><li><a href="global.html#getParent">getParent</a></li><li><a href="global.html#getParentForNewChild">getParentForNewChild</a></li><li><a href="global.html#getPercentCompleted">getPercentCompleted</a></li><li><a href="global.html#getPH">getPH</a></li><li><a href="global.html#getPoint">getPoint</a></li><li><a href="global.html#getPosition">getPosition</a></li><li><a href="global.html#getPosition()">getPosition()</a></li><li><a href="global.html#getPreviousOf">getPreviousOf</a></li><li><a href="global.html#getPreviousPageOf">getPreviousPageOf</a></li><li><a href="global.html#getPropertyFn">getPropertyFn</a></li><li><a href="global.html#getPW">getPW</a></li><li><a href="global.html#getRadius">getRadius</a></li><li><a href="global.html#getRadiusX">getRadiusX</a></li><li><a href="global.html#getRadiusY">getRadiusY</a></li><li><a href="global.html#getRecord">getRecord</a></li><li><a href="global.html#getResizeFnFor">getResizeFnFor</a></li><li><a href="global.html#getResponse">getResponse</a></li><li><a href="global.html#getResponseData">getResponseData</a></li><li><a href="global.html#getRx">getRx</a></li><li><a href="global.html#getRy">getRy</a></li><li><a href="global.html#getSearcher">getSearcher</a></li><li><a href="global.html#getSelectedRecord">getSelectedRecord</a></li><li><a href="global.html#getSelectedRecords">getSelectedRecords</a></li><li><a href="global.html#getSize">getSize</a></li><li><a href="global.html#getSocketUrl">getSocketUrl</a></li><li><a href="global.html#getSortedBy">getSortedBy</a></li><li><a href="global.html#getSortOrder">getSortOrder</a></li><li><a href="global.html#getStop">getStop</a></li><li><a href="global.html#getStopColor">getStopColor</a></li><li><a href="global.html#getStopOpacity">getStopOpacity</a></li><li><a href="global.html#getStyle">getStyle</a></li><li><a href="global.html#getToggleGroup">getToggleGroup</a></li><li><a href="global.html#getUrl">getUrl</a></li><li><a href="global.html#getValue">getValue</a></li><li><a href="global.html#getWidth">getWidth</a></li><li><a href="global.html#getX">getX</a></li><li><a href="global.html#getY">getY</a></li><li><a href="global.html#hasModRewriteUrls">hasModRewriteUrls</a></li><li><a href="global.html#hasSearchTokens">hasSearchTokens</a></li><li><a href="global.html#hide">hide</a></li><li><a href="global.html#hideAfterDelay">hideAfterDelay</a></li><li><a href="global.html#hideOnFinish">hideOnFinish</a></li><li><a href="global.html#html">html</a></li><li><a href="global.html#id">id</a></li><li><a href="global.html#inputConfig">inputConfig</a></li><li><a href="global.html#inputFormat">inputFormat</a></li><li><a href="global.html#insertColumnAfter">insertColumnAfter</a></li><li><a href="global.html#insertColumnBefore">insertColumnBefore</a></li><li><a href="global.html#insertJSON">insertJSON</a></li><li><a href="global.html#isCollapsible">isCollapsible</a></li><li><a href="global.html#isDirty">isDirty</a></li><li><a href="global.html#isFirstPage">isFirstPage</a></li><li><a href="global.html#isInAGroup">isInAGroup</a></li><li><a href="global.html#isLastPage">isLastPage</a></li><li><a href="global.html#isOnFirstPage">isOnFirstPage</a></li><li><a href="global.html#isOnLastPage">isOnLastPage</a></li><li><a href="global.html#isOnPage">isOnPage</a></li><li><a href="global.html#isResizable">isResizable</a></li><li><a href="global.html#isValid">isValid</a></li><li><a href="global.html#isVisible">isVisible</a></li><li><a href="global.html#JSONParser">JSONParser</a></li><li><a href="global.html#lastChildCoordinates">lastChildCoordinates</a></li><li><a href="global.html#lastPage">lastPage</a></li><li><a href="global.html#linkWith">linkWith</a></li><li><a href="global.html#listenTo">listenTo</a></li><li><a href="global.html#load">load</a></li><li><a href="global.html#loadMovie">loadMovie</a></li><li><a href="global.html#ludoEvents">ludoEvents</a></li><li><a href="global.html#maxDate">maxDate</a></li><li><a href="global.html#maxLength">maxLength</a></li><li><a href="global.html#minDate">minDate</a></li><li><a href="global.html#minimize">minimize</a></li><li><a href="global.html#minLength">minLength</a></li><li><a href="global.html#mouseYOffset">mouseYOffset</a></li><li><a href="global.html#movieId">movieId</a></li><li><a href="global.html#name">name</a></li><li><a href="global.html#newChildCoordinates">newChildCoordinates</a></li><li><a href="global.html#next">next</a></li><li><a href="global.html#nextPage">nextPage</a></li><li><a href="global.html#offsetBrightness">offsetBrightness</a></li><li><a href="global.html#offsetHue">offsetHue</a></li><li><a href="global.html#offsetSaturation">offsetSaturation</a></li><li><a href="global.html#on">on</a></li><li><a href="global.html#open">open</a></li><li><a href="global.html#options">options</a></li><li><a href="global.html#orientation">orientation</a></li><li><a href="global.html#paging">paging</a></li><li><a href="global.html#positionChild">positionChild</a></li><li><a href="global.html#previous">previous</a></li><li><a href="global.html#previousPage">previousPage</a></li><li><a href="global.html#primaryKey">primaryKey</a></li><li><a href="global.html#read">read</a></li><li><a href="global.html#readonly">readonly</a></li><li><a href="global.html#remoteSearch">remoteSearch</a></li><li><a href="global.html#remove">remove</a></li><li><a href="global.html#removeFromGroup">removeFromGroup</a></li><li><a href="global.html#renderer">renderer</a></li><li><a href="global.html#reset">reset</a></li><li><a href="global.html#resource">resource</a></li><li><a href="global.html#restart">restart</a></li><li><a href="global.html#rotate">rotate</a></li><li><a href="global.html#rotateAround">rotateAround</a></li><li><a href="global.html#scale">scale</a></li><li><a href="global.html#Search">Search</a></li><li><a href="global.html#search">search</a></li><li><a href="global.html#searchConfig">searchConfig</a></li><li><a href="global.html#selected">selected</a></li><li><a href="global.html#selectRecord">selectRecord</a></li><li><a href="global.html#selectRecordIndex">selectRecordIndex</a></li><li><a href="global.html#selectRecords">selectRecords</a></li><li><a href="global.html#selectTo">selectTo</a></li><li><a href="global.html#send">send</a></li><li><a href="global.html#set">set</a></li><li><a href="global.html#setCx">setCx</a></li><li><a href="global.html#setCy">setCy</a></li><li><a href="global.html#setData">setData</a></li><li><a href="global.html#setDate">setDate</a></li><li><a href="global.html#setDefaultMessage">setDefaultMessage</a></li><li><a href="global.html#setDocumentRoot">setDocumentRoot</a></li><li><a href="global.html#setDropShadow">setDropShadow</a></li><li><a href="global.html#setEnabled">setEnabled</a></li><li><a href="global.html#setFileUploadUrl">setFileUploadUrl</a></li><li><a href="global.html#setHeight">setHeight</a></li><li><a href="global.html#setInvalid">setInvalid</a></li><li><a href="global.html#setMonth">setMonth</a></li><li><a href="global.html#setOffset">setOffset</a></li><li><a href="global.html#setPoint">setPoint</a></li><li><a href="global.html#setProperties">setProperties</a></li><li><a href="global.html#setRadius">setRadius</a></li><li><a href="global.html#setRadiusX">setRadiusX</a></li><li><a href="global.html#setRadiusY">setRadiusY</a></li><li><a href="global.html#setResource">setResource</a></li><li><a href="global.html#setRx">setRx</a></li><li><a href="global.html#setRy">setRy</a></li><li><a href="global.html#setSocketUrl">setSocketUrl</a></li><li><a href="global.html#setStopColor">setStopColor</a></li><li><a href="global.html#setStopOpacity">setStopOpacity</a></li><li><a href="global.html#setStyle">setStyle</a></li><li><a href="global.html#setTemporarySize">setTemporarySize</a></li><li><a href="global.html#setValue">setValue</a></li><li><a href="global.html#setViewBox">setViewBox</a></li><li><a href="global.html#setWidth">setWidth</a></li><li><a href="global.html#setX">setX</a></li><li><a href="global.html#setY">setY</a></li><li><a href="global.html#setYear">setYear</a></li><li><a href="global.html#show">show</a></li><li><a href="global.html#showChild">showChild</a></li><li><a href="global.html#showFirstPage">showFirstPage</a></li><li><a href="global.html#showLastPage">showLastPage</a></li><li><a href="global.html#showNextPage">showNextPage</a></li><li><a href="global.html#showPage">showPage</a></li><li><a href="global.html#showPreviousPage">showPreviousPage</a></li><li><a href="global.html#size">size</a></li><li><a href="global.html#sort">sort</a></li><li><a href="global.html#sortBy">sortBy</a></li><li><a href="global.html#sortFn">sortFn</a></li><li><a href="global.html#statefulProperties">statefulProperties</a></li><li><a href="global.html#styles">styles</a></li><li><a href="global.html#text">text</a></li><li><a href="global.html#textKey">textKey</a></li><li><a href="global.html#toggle">toggle</a></li><li><a href="global.html#toPage">toPage</a></li><li><a href="global.html#toRad">toRad</a></li><li><a href="global.html#tpl">tpl</a></li><li><a href="global.html#treeConfig">treeConfig</a></li><li><a href="global.html#turnOff">turnOff</a></li><li><a href="global.html#turnOn">turnOn</a></li><li><a href="global.html#twin">twin</a></li><li><a href="global.html#ucFirst">ucFirst</a></li><li><a href="global.html#ucWords">ucWords</a></li><li><a href="global.html#uncheck">uncheck</a></li><li><a href="global.html#updateRecord">updateRecord</a></li><li><a href="global.html#updateViewport">updateViewport</a></li><li><a href="global.html#url">url</a></li><li><a href="global.html#val">val</a></li><li><a href="global.html#validate">validate</a></li><li><a href="global.html#validator">validator</a></li><li><a href="global.html#value">value</a></li><li><a href="global.html#valueKey">valueKey</a></li><li><a href="global.html#weight">weight</a></li><li><a href="global.html#withResource">withResource</a></li><li><a href="global.html#withResourceService">withResourceService</a></li><li><a href="global.html#withService">withService</a></li>
				</ul>
			</li>
			
		</ul>
        
            <div class="col-sm-3 col-md-3">
                <form class="navbar-form" role="search">
                    <div class="input-group">
                        <input type="text" class="form-control" placeholder="Search" name="q" id="search-input">
                        <div class="input-group-btn">
                            <button class="btn btn-default" id="search-submit"><i class="glyphicon glyphicon-search"></i></button>
                        </div>
                    </div>
                </form>
            </div>
        
	</div>

</div>
</div>


<div class="container" id="toc-content">
<div class="row">

	
	<div class="col-md-12">
	
		<div id="main">
			

		<h1 class="page-title">Source: data-source/collection.js</h1>
    
<section>
    <article>
        <pre
            class="sunlight-highlight-javascript linenums">/**
 Data source collection
 @namespace ludo.dataSource.
 @class ludo.dataSource.Collection
 @augments dataSource.JSON
 
 @param {Object} config
 @example
 	dataSource:{
		url:'data-source/grid.php',
		id:'myDataSource',
		paging:{
			size:12,
			remotePaging:false,
			cache:false,
			cacheTimeout:1000
		},
		searchConfig:{
			index:['capital', 'country']
		},
		listeners:{
			select:function (record) {
				console.log(record);
			}
		}
	}
 */
ludo.dataSource.Collection = new Class({
	Extends:ludo.dataSource.JSON,
	/**
	 custom sort functions, which should return -1 if record a is smaller than
	 record b and 1 if record b is larger than record a.
	 @config {Function} sortFn
	 @default {}
	 @example
	 	sortFn:{
			'population':{
				'asc' : function(a,b){
					return parseInt(a.population) &lt; parseInt(b.population) ? -1 : 1
				},
				'desc' : function(a,b){
					return parseInt(a.population) > parseInt(b.population) ? -1 : 1
				}
			}
	 	}
	 */
	sortFn:{},

	selectedRecords:[],

	/**
	 * Primary key for records
	 * @config {String} primaryKey
	 * @default "id"
     * @optional
	 */
	primaryKey:'id',

	/**
	 Use paging, i.e. only load a number of records from the server
	 @attribute {Object} paging
	 @example
	 	paging:{
		 	size:10, // Number of rows per page
		  	remotePaging:true, // Load only records per page from server, i.e. new request per page
		  	cache : true, // Store pages in cache, i.e no request if data for page is in cache,
		  	cacheTimeout:30 // Optional time in second before cache is considered out of date, i.e. new server request
		}

	 */
	paging:undefined,

	dataCache:{},

	sortedBy:{
		column:undefined,
		order:undefined
	},
	/**
	 Configuration object for {{#crossLink "dataSource.CollectionSearch"}}{{/crossLink}}. This is
	 the class which searchs and filters data in the collection.
	 @config searchConfig
	 @type Object
	 @example
	 	searchConfig:{
	 		index:['city','country'],
	 		delay:.5
	 	}
	 which makes the record keys/columns "city" and "country" searchable. It waits .5 seconds
	 before the search is executed. This is useful when searching large collections and you
	 want to delay the search until the user has finished entering into a search box.
	 */
	searchConfig:undefined,

	statefulProperties:['sortedBy', 'paging'],

	index:undefined,

	searcherType:'dataSource.CollectionSearch',

	uidMap:{},

	/**
	 * Reference to record to select by default once data has been loaded
	 * @config {Object|String} selected
	 * @default undefined
	 */
	selected:undefined,

	__construct:function (config) {
		this.parent(config);
        this.setConfigParams(config, ['searchConfig','sortFn','primaryKey','sortedBy','paging','selected']);

		if (this.primaryKey &amp;&amp; !ludo.util.isArray(this.primaryKey))this.primaryKey = [this.primaryKey];
		if (this.paging) {
			this.paging.offset = this.paging.offset || 0;
			this.paging.initialOffset = this.paging.offset;
			if (this.paging.initialOffset !== undefined) {
				this.fireEvent('page', (this.paging.initialOffset / this.paging.size) + 1);
			}
			if (this.isCacheEnabled()) {
				this.addEvent('load', this.populateCache.bind(this));
			}
		}

		this.addEvent('parsedata', this.createIndex.bind(this));


		if(this.selected){
			this.addEvent('firstLoad', this.setInitialSelected.bind(this));
		}

		if(this.data &amp;&amp; !this.index)this.createIndex();
	},

	hasRemoteSearch:function(){
		return this.paging &amp;&amp; this.paging.remotePaging;
	},

	setInitialSelected:function(){
		this.selectRecord(this.selected);
	},

	/**
	 * Returns 1) If search is specified: number of records in search result, or 2) number of records in entire collection.
	 * @function getCount
	 * @return {Number} count
	 */
	getCount:function () {
		if (this.paging &amp;&amp; this.paging.rows)return this.paging.rows;
		if (this.searcher &amp;&amp; this.searcher.hasData())return this.searcher.getCount();
		return this.data ? this.data.length : 0;
	},

	isCacheEnabled:function () {
		return this.paging &amp;&amp; this.paging['remotePaging'] &amp;&amp; this.paging.cache;
	},

	/**
	 * Resort data-source
	 * @function sort
	 * @return void
	 */
	sort:function () {
		if (this.sortedBy.column &amp;&amp; this.sortedBy.order) {
			this.sortBy(this.sortedBy.column, this.sortedBy.order);
		}
	},

	/**
	 Set sorted by column
	 @function by
	 @param {String} column
	 @return {dataSource.Collection} this
	 @example
	 	collection.by('country').ascending().sort();
	 or
	 @example
	 	collection.by('country').sort();
	 */
	by:function(column){
		this.sortedBy.column = column;
		this.sortedBy.order = this.getSortOrderFor(column);
		return this;
	},
	/**
	 Set sort order to ascending
	 @function ascending
	 @return {dataSource.Collection} this
	 @example
	 	collection.by('country').ascending().sort();
	 */
	ascending:function(){
		this.sortedBy.order = 'asc';
		return this;
	},
	/**
	 Set sort order to descending
	 @function descending
	 @return {dataSource.Collection} this
	 @example
	 	collection.by('country').descending().sort();
	 */
	descending:function(){
		this.sortedBy.order = 'desc';
		return this;
	},

	/**
	 Sort by column and order

	 The second argument(order) is optional
	 @function sortBy
	 @param {String} column
	 @param {String} order
     @optional
	 @return {dataSource.Collection} this
	 @example
	 	grid.getDataSource().sortBy('firstname', 'desc');
	 which also can be written as
	 @example
	 	grid.getDataSource().by('firstname').descending().sort();
	 */
	sortBy:function (column, order) {
        order = order || this.getSortOrderFor(column);

		this.sortedBy = {
			column:column,
			order:order
		};

		if (this.paging) {
			this.paging.offset = this.paging.initialOffset || 0;
			this.fireEvent('page', Math.round(this.paging.offset / this.paging.size) + 1);
		}

		if (this.shouldSortOnServer()) {
			this.loadOrGetFromCache();
		} else {
			var data = this._getData();
			data.sort(this.getSortFnFor(column, order));
			this.fireEvent('change');
		}
		/**
		 * Event fired when a data has been sorted,
		 * param example: { column:'country',order:'asc' }
		 * @event sort
		 * @param {Object} sortedBy
		 */
		this.fireEvent('sort', this.sortedBy);
        if(this.paging)this.firePageEvents();
		this.fireEvent('state');

		return this;
	},

	/**
	 * Return current sorted by column
	 * @function getSortedBy
	 * @return {String} column
	 */
	getSortedBy:function () {
		return this.sortedBy.column;
	},
	/**
	 * Return current sort order (asc|desc)
	 * @function getSortOrder
	 * @return {String} order
	 */
	getSortOrder:function () {
		return this.sortedBy.order;
	},

	shouldSortOnServer:function () {
		return this.paging &amp;&amp; this.paging.remotePaging;
	},

	getSortFnFor:function (column, order) {
		if (this.sortFn[column] !== undefined) {
			return this.sortFn[column][order];
		}
		if (order === 'asc') {
			return function (a, b) {
				return a[column] + '_' + a[this.primaryKey] &lt; b[column] + '_' + b[this.primaryKey] ? -1 : 1
			};
		} else {
			return function (a, b) {
				return a[column] + '_' + a[this.primaryKey] &lt; b[column] + '_' +  b[this.primaryKey] ? 1 : -1
			};
		}
	},

	getSortOrderFor:function (column) {
		if (this.sortedBy.column === column) {
			return this.sortedBy.order === 'asc' ? 'desc' : 'asc';
		}
		return 'asc';
	},

	/**
	 * Add a record to data-source
	 * @function addRecord
	 * @param record
	 * @return {Object} record
	 */
	addRecord:function (record) {
        this.data = this.data || [];
		this.data.push(record);

		if(!this.index)this.createIndex();
		/**
		 * Event fired when a record is added to the collection
		 * @event add
		 * @param {Object} record
		 */
		this.fireEvent('add', record);

		return this.createRecord(record);
	},

	/**
	 * Returns plain object for a record from search. To get a
	 * {{#crossLink "dataSource.Record"}}{{/crossLink}} object
	 * use {{#crossLink "dataSource.Collection/getRecord"}}{{/crossLink}}
	 *
	 * collection.find({ capital : 'Oslo' });
	 *
	 * @function findRecord
	 * @param {Object} search
	 * @return {Object|undefined} record
	 */
	findRecord:function (search) {

		if (!this.data)return undefined;
		if(search['getUID'] !== undefined)search = search.getUID();

		if(search.uid)search = search.uid;
		var rec = this.getById(search);
		if(rec)return rec;

		var searchMethod = ludo.util.isObject(search) ? 'isRecordMatchingSearch' : 'hasMatchInPrimaryKey';


		for (var i = 0; i &lt; this.data.length; i++) {
			if (this[searchMethod](this.data[i], search)) {
				return this.data[i];
			}
		}
		return undefined;
	},

	isRecordMatchingSearch:function (record, search) {
		for (var key in search) {
			if (search.hasOwnProperty(key)) {
				if (record[key] !== search[key]) {
					return false;
				}
			}
		}
		return true;
	},

	hasMatchInPrimaryKey:function(record, search){
		if(this.primaryKey){
			for(var j=0;j&lt;this.primaryKey.length;j++){
				if(record[this.primaryKey[j]]  === search)return true;
			}
		}
		return false;
	},

	/**
	 * Find specific records, example:
	 * var records = collection.findRecords({ country:'Norway'});
	 * @function findRecords
	 * @param {Object} search
	 * @return {Array} records
	 */
	findRecords:function (search) {
		var ret = [];
		for (var i = 0; i &lt; this.data.length; i++) {
			if (this.isRecordMatchingSearch(this.data[i], search)) {
				ret.push(this.data[i]);
			}
		}
		return ret;
	},

    getLinearData:function(){
        return this.data;
    },

	/**
	 * Select a specific record
	 * @function selectRecord
	 * @param {Object} search
	 * @return {Object|undefined} record
	 */
	selectRecord:function (search) {
		var rec = this.findRecord(search);
		if (rec) {
			this._setSelectedRecord(rec);
			return rec;
		}
		return undefined;
	},


	/**
	 * Select a collection of records
	 * @function selectRecords
	 * @param {Object} search
	 * @return {Array} records
	 */
	selectRecords:function (search) {
		this.selectedRecords = this.findRecords(search);
		for (var i = 0; i &lt; this.selectedRecords.length; i++) {
			this.fireSelect(this.selectedRecords[i]);
		}
		return this.selectedRecords;
	},

	/**
	 * Select a specific record by index
	 * @function selectRecordIndex
	 * @param {number} index
	 */
	selectRecordIndex:function (index) {
		var data = this._getData();
		if (data.length &amp;&amp; index >= 0 &amp;&amp; index &lt; data.length) {
			var rec = data[index];
			this._setSelectedRecord(rec);
			return rec;
		}
		return undefined;
	},

	_getData:function () {
		if (this.hasSearchResult())return this.searcher.getData();
		return this.data;
	},

	getRecordByIndex:function (index) {
		if (this.data.length &amp;&amp; index >= 0 &amp;&amp; index &lt; this.data.length) {
			return this.data[index];
		}
		return undefined;
	},

	/**
	 * Select previous record. If no record is currently selected, first record will be selected
	 * @function previous
	 * @return {Object} record
	 */
	previous:function () {
		var rec = this.getPreviousOf(this.getSelectedRecord());
		if (rec) {
			this._setSelectedRecord(rec);
		}
		return rec;
	},

	/**
	 * Returns previous record of given record
	 * @function getPreviousOf
	 * @param {Object} record
	 * @return {Object} previous record
	 */
	getPreviousOf:function (record) {
		var data = this._getData();
		if (record) {
			var index = data.indexOf(record);
            return index > 0 ? data[index-1] : undefined;
		} else {
            return data.length > 0 ? data[0] : undefined;
		}
	},

	/**
	 * Select next record. If no record is currently selected, first record will be selected
	 * @function next
	 * @return {Object} record
	 */
	next:function () {
		var rec = this.getNextOf(this.getSelectedRecord());
		if (rec) {
			this._setSelectedRecord(rec);
		}
		return rec;
	},
	/**
	 * Returns next record of given record.
	 * @function getNextOf
	 * @param {Object} record
	 * @return {Object} next record
	 */
	getNextOf:function (record) {
		var data = this._getData();
		if (record) {
			var index = data.indexOf(record);
            return index &lt; data.length - 1 ? data[index+1] : undefined;
		} else {
            return data.length > 0 ? data[0] : undefined;
		}
	},

	_setSelectedRecord:function (rec) {
		if (this.selectedRecords.length) {
			/**
			 * Event fired when a record is selected
			 * @event deselect
			 * @param {Object} record
			 */
			this.fireEvent('deselect', this.selectedRecords[0]);
		}
		this.selectedRecords = [rec];
		/**
		 Event fired when a record is selected
		 @event select
		 @param {Object} record
		 @example
		 	...
		 	listeners:{
		 		'select' : function(record){
		 			console.log(record);
		 		}
		 	}
		 */
		this.fireSelect(Object.clone(rec));
	},

	/**
	 * Return selected record
	 * @function getSelectedRecord
	 * @return {Object|undefined} record
	 */
	getSelectedRecord:function () {
        return this.selectedRecords.length > 0 ? this.selectedRecords[0] : undefined;
	},

	/**
	 * Return selected records
	 * @function getSelectedRecords
	 * @return {Array} records
	 */
	getSelectedRecords:function () {
		return this.selectedRecords;
	},

	/**
	 Delete records matching search,
	 @function deleteRecords
	 @param {Object} search
	 @example
	 	grid.getDataSource().deleteRecords({ country: 'Norway' });
	 will delete all records from collection where country is equal to "Norway". A delete event
	 will be fired for each deleted record.
	 */
	deleteRecords:function (search) {
		var records = this.findRecords(search);
		for (var i = 0; i &lt; records.length; i++) {
			this.data.erase(records[i]);
			this.fireEvent('delete', records[i]);
		}
	},
	/**
	 Delete a single record. Deletes first match when
	 multiple matches found.
	 @function deleteRecord
	 @param {Object} search
	 @example
	 	grid.getDataSource().deleteRecord({ country: 'Norway' });
	 Will delete first found record where country is equal to Norway. It will fire a
	 delete event if a record is found and deleted.
	 */
	deleteRecord:function (search) {
		var rec = this.findRecord(search);
		if (rec) {
			this.data.erase(rec);
			/**
			 * Event fired when a record is deleted
			 * @event delete
			 * @param {Object} record
			 */
			this.fireEvent('delete', rec);
		}
	},

	/**
	 Select records from current selected record to record matching search,
	 @function selectTo
	 @param {Object} search
	 @example
	 	collection.selectRecord({ country: 'Norway' });
	 	collection.selectTo({country: 'Denmark'});
	 	var selectedRecords = collection.getSelectedRecords();
	 */
	selectTo:function (search) {
		var selected = this.getSelectedRecord();
		if (!selected) {
			this.selectRecord(search);
			return;
		}
		var rec = this.findRecord(search);
		if (rec) {
			this.selectedRecords = [];
			var index = this.data.indexOf(rec);
			var indexSelected = this.data.indexOf(selected);
			var i;
			if (index > indexSelected) {
				for (i = indexSelected; i &lt;= index; i++) {
					this.selectedRecords.push(this.data[i]);
					this.fireSelect(this.data[i]);
				}
			} else {
				for (i = indexSelected; i >= index; i--) {
					this.selectedRecords.push(this.data[i]);
					this.fireSelect(this.data[i]);
				}
			}
		}
	},

	/**
	 * Update a record
	 * @function updateRecord
	 * @param {Object} search
	 * @param {Object} updates
	 * @return {dataSource.Record} record
	 */
	updateRecord:function (search, updates) {
		var rec = this.getRecord(search);
		if (rec) {
			rec.setProperties(updates);
		}
		return rec;
	},

	getPostData:function () {
		if (!this.paging) {
			return this.parent();
		}
		var ret = this.postData || {};
		ret._paging = {
			size:this.paging.size,
			offset:this.paging.offset
		};
		ret._sort = this.sortedBy;
		return ret;
	},
	/**
	 * When paging is enabled, go to previous page.
	 * fire previousPage event
	 * @function previousPage
	 */
	previousPage:function () {
		if (!this.paging || this.isOnFirstPage())return;
		this.paging.offset -= this.paging.size;
		/**
		 * Event fired when moving to previous page
		 * @event previousPage
		 */
		this.onPageChange('previousPage');
	},

	/**
	 * When paging is enabled, go to next page
	 * fire nextPage event
	 * @function nextPage
	 */
	nextPage:function () {
		if (!this.paging || this.isOnLastPage())return;
		this.paging.offset += this.paging.size;
		/**
		 * Event fired when moving to next page
		 * @event nextPage
		 */
		this.onPageChange('nextPage');
	},

	/**
	 * Go to last page
	 * @function lastPage
	 */
	lastPage:function () {
		if (!this.paging || this.isOnLastPage())return;
		var count = this.getCount();
		var decr = count % this.paging.size;
		if(decr === 0) decr = this.paging.size;
		this.paging.offset = count - decr;
		this.onPageChange('lastPage');
	},

	firstPage:function () {
		if (!this.paging || this.isOnFirstPage())return;
		this.paging.offset = 0;
		/**
		 * Event fired when moving to first page
		 * @event firstPage
		 */
		this.onPageChange('firstPage');
	},

	isOnFirstPage:function () {
		if (!this.paging)return true;
		return this.paging.offset === undefined || this.paging.offset === 0;
	},

	isOnLastPage:function () {
		return this.paging.size + this.paging.offset >= this.getCount();
	},

	onPageChange:function (event) {
		if (this.paging['remotePaging']) {
			this.loadOrGetFromCache();
		}
		this.fireEvent('change');
		this.fireEvent(event);
		this.firePageEvents();
	},

	loadOrGetFromCache:function () {
		if (this.isDataInCache()) {
			this.data = this.dataCache[this.getCacheKey()].data;
			this.fireEvent('change');
		} else {
			this.load();
		}
	},

	populateCache:function () {
		if (this.isCacheEnabled()) {
			this.dataCache[this.getCacheKey()] = {
				data:this.data,
				time:new Date().getTime()
			}
		}
	},

	isDataInCache:function () {
		return this.dataCache[this.getCacheKey()] !== undefined &amp;&amp; !this.isCacheOutOfDate();
	},

    clearCache:function(){
        this.dataCache = {};
    },

	isCacheOutOfDate:function () {
		if (!this.paging['cacheTimeout'])return false;

		var created = this.dataCache[this.getCacheKey()].time;
		return created + (this.paging['cacheTimeout'] * 1000) &lt; (new Date().getTime());
	},

	getCacheKey:function () {
		var keys = [
			'key', this.paging.offset, this.sortedBy.column, this.sortedBy.order
		];
		if (this.searcher !== undefined &amp;&amp; this.searcher.hasData())keys.push(this.searcher.searchToString());
		return keys.join('|');
	},

    hasData:function(){
        return this.data != undefined &amp;&amp; this.data.length > 0;
    },

	firePageEvents:function (skipState) {
		if (this.isOnLastPage()) {
			/**
			 * Event fired when moving to last page
			 * @event lastPage
			 */
			this.fireEvent('lastPage');
		} else {
			/**
			 * Event fired when moving to a different page than last page
			 * @event notLastPage
			 */
			this.fireEvent('notLastPage');
		}

		if (this.isOnFirstPage()) {
			this.fireEvent('firstPage');

		} else {
			/**
			 * Event fired when moving to a different page than last page
			 * @event notFirstPage
			 */
			this.fireEvent('notFirstPage');
		}

		/**
		 * Event fired when moving to a page
		 * @event page
		 * @param {Number} page number
		 */
		this.fireEvent('page', this.getPageNumber());
		if (skipState === undefined)this.fireEvent('state');
	},

	/**
	 * Go to a specific page
	 * @function toPage
	 * @param {Number} pageNumber
	 * @return {Boolean} success
	 */
	toPage:function (pageNumber) {
		if (pageNumber > 0 &amp;&amp; pageNumber &lt;= this.getPageCount() &amp;&amp; !this.isOnPage(pageNumber)) {
			this.paging.offset = (pageNumber - 1) * this.paging.size;
			/**
			 * Event fired when moving to a specific page
			 * @event toPage
			 */
			this.onPageChange('toPage');
			return true;
		}
		return false;
	},

	setPageSize:function(size){
		if(this.paging){
			this.dataCache = {};
			this.paging.size = parseInt(size);
			this.paging.offset = 0;

			this.onPageChange('toPage');
		}
	},

	/**
	 * True if on given page
	 * @function isOnPage
	 * @param {Number} pageNumber
	 * @return {Boolean}
	 */
	isOnPage:function (pageNumber) {
		return pageNumber == this.getPageNumber();
	},

	/**
	 * Return current page number
	 * @function getPageNumber
	 * @return {Number} page
	 */
	getPageNumber:function () {
        return this.paging ? Math.floor(this.paging.offset / this.paging.size) + 1 : 1;
	},

	/**
	 * Return number of pages
	 * @function getPageCount
	 * @return {Number}
	 */
	getPageCount:function () {
        return this.paging ? Math.ceil(this.getCount() / this.paging.size) : 1;
	},

	getData:function () {
		if (this.hasSearchResult()){
			if (this.paging &amp;&amp; this.paging.size) {
				return this.getDataForPage(this.searcher.getData());
			}
			return this.searcher.getData();
		}
		if (!this.paging || this.paging.remotePaging) {
			return this.parent();
		}
		return this.getDataForPage(this.data);
	},

	getDataForPage:function (data) {
		if (!data || data.length == 0)return [];
		var offset = this.paging.initialOffset || this.paging.offset;
		if (offset > data.length) {
			this.toPage(this.getPageCount());
			offset = (this.getPageCount() - 1) * this.paging.size;
		}
		this.resetInitialOffset.delay(200, this);
		return data.slice(offset, Math.min(data.length, offset + this.paging.size));
	},

	resetInitialOffset:function () {
		this.paging.initialOffset = undefined;
	},

	loadComplete:function (data, json) {
		// TODO refactor this
		if (this.paging &amp;&amp; json.rows !==undefined)this.paging.rows = json.rows;
		if (this.paging &amp;&amp; json.response &amp;&amp; json.response.rows !==undefined)this.paging.rows = json.response.rows;
		this.parent(data, json);

		this.fireEvent('count', this.getCount());
		if (this.shouldSortAfterLoad()) {
			this.sort();
		} else {
			this.fireEvent('change');
		}
		if (this.paging !== undefined) {
			this.firePageEvents(true);
		}
	},

	createIndex:function () {
		this.index = {};
		this.indexBranch(this.data);
	},

	indexBranch:function(branch, parent){
		for (var i = 0; i &lt; branch.length; i++) {
			this.indexRecord(branch[i], parent);
			if(branch[i].children &amp;&amp; branch[i].children.length)this.indexBranch(branch[i].children, branch[i]);
		}
	},

	indexRecord:function(record, parent){
		if(!this.index)this.createIndex();
		if(parent)record.parentUid = parent.uid;
		var pk = this.getPrimaryKeyIndexFor(record);
		if(pk)this.index[pk] = record;
		if(!record.uid)record.uid = ['uid_', String.uniqueID()].join('');
		this.index[record.uid] = record;
	},

	shouldSortAfterLoad:function(){
		if(this.paging &amp;&amp; this.paging.remotePaging)return false;
		return this.sortedBy !== undefined &amp;&amp; this.sortedBy.column &amp;&amp; this.sortedBy.order;
	},

	/**
	 Filter collection based on given search term. To filter on multiple search terms, you should
	 get a reference to the {{#crossLink "dataSource.CollectionSearch"}}{{/crossLink}} object and
	 use the available {{#crossLink "dataSource.CollectionSearch"}}{{/crossLink}} methods to add
	 multiple search terms.
	 @function Search
	 @param {String} search
	 @example
	 	ludo.get('myCollection').search('New York');
	 	// or with the {{#crossLink "dataSource.CollectionSearch/add"}}{{/crossLink}} method
	 	var searcher = ludo.get('myCollection').getSearcher();
	 	searcher.where('New York').execute();
	 	searcher.execute();
	 */
	search:function (search) {
		this.getSearcher().search(search);
	},

	/**
	 * Executes a remote search for records with the given data
	 * @function remoteSearch
	 * @param {String|Object} search
	 */
	remoteSearch:function(search){
		this.postData = this.postData || {};
		this.postData.search = search;
		this.toPage(1);
		this.load();
	},

	afterSearch:function(){
		var searcher = this.getSearcher();
		this.fireEvent('count', searcher.hasData() ? searcher.getCount() : this.getCount());
		if (this.paging !== undefined) {
			this.paging.offset = 0;
			this.firePageEvents(true);
			this.fireEvent('pageCount', this.getPageCount());
		}
		this.fireEvent('change');
	},

	searcher:undefined,
	/**
	 * Returns a {{#crossLink "dataSource.CollectionSearch"}}{{/crossLink}} object which
	 * you can use to filter a collection.
	 * @function getSearcher
	 * @return {dataSource.CollectionSearch}
	 */
	getSearcher:function () {
		if (this.searcher === undefined) {
			this.searchConfig = this.searchConfig || {};
			var config = Object.merge({
				type:this.searcherType,
				dataSource:this
			}, this.searchConfig);
			this.searcher = ludo._new(config);
			this.addSearcherEvents();
		}
		return this.searcher;
	},

	addSearcherEvents:function(){
		this.searcher.addEvent('search', this.afterSearch.bind(this));
		this.searcher.addEvent('deleteSearch', this.afterSearch.bind(this));
	},

	hasSearchResult:function(){
		return this.searcher !== undefined &amp;&amp; this.searcher.hasData();
	},
	/**
	 Return record by id or undefined if not found. Records are indexed by id. This method
	 gives you quick access to a record by it's id. The method returns a reference to the
	 actual record. You can use Object.clone(record) to create a copy of it in case you
	 want to update the record but not make those changes to the collection.
	 @function getById
	 @param {String|Number|Object} id
	 @return {Object} record
	 @example
	 	var collection = new ludo.dataSource.Collection({
	 		url : 'get-countries.php',
	 		primaryKey:'country'
	 	});
	 	var record = collection.getById('Japan'); // Returns record for Japan if it exists.
	 You can also define multiple keys as id
	 @example
		 var collection = new ludo.dataSource.Collection({
			url : 'get-countries.php',
			primaryKey:['id', 'country']
		 });
	   	 var record = collection.getById({ id:1, country:'Japan' });
	 This is especially useful when you have a {{#crossLink "dataSource.TreeCollection"}}{{/crossLink}}
	 where child nodes may have same numeric id as it's parent.
	 @example
	 	{ id:1, type:'country', title : 'Japan',
	 	 	children:[ { id:1, type:'city', title:'Tokyo }]
	 By setting primaryKey to ['id', 'type'] will make it possible to distinguish between countries and cities.
	 */
	getById:function(id){
		if(this.index[id] !== undefined){
			return this.index[id];
		}

		if(this.primaryKey.length===1){
			return this.index[id];
		}else{
			var key = [];
			for(var i=0;i&lt;this.primaryKey.length;i++){
				key.push(id[this.primaryKey[i]]);
			}
			return this.index[key.join('')];
		}
	},

	recordObjects:{},

	/**
	 Returns {{#crossLink "dataSource.Record"}}{{/crossLink}} object for a record.
	 If you want to update a record, you should
	 first get a reference to {{#crossLink "dataSource.Record"}}{{/crossLink}} and then call one
	 of it's methods.
	 @function getRecord
	 @param {String|Object} search
	 @return {dataSource.Record|undefined}
	 @example
		 var collection = new ludo.dataSource.Collection({
			url : 'get-countries.php',
			primaryKey:'country'
		 });
	 	 collection.getRecord('Japan').set('capital', 'tokyo');
	 */
	getRecord:function(search){
		var rec = this.findRecord(search);
		if(rec){
			return this.createRecord(rec);
		}
		return undefined;
	},

	createRecord:function(data){
		var id = data.uid;
		if(!this.recordObjects[id]){
			this.recordObjects[id] = this.recordInstance(data, this);
			this.addRecordEvents(this.recordObjects[id]);
		}
		return this.recordObjects[id];
	},

    recordInstance:function(data){
        return new ludo.dataSource.Record(data, this);
    },

	addRecordEvents:function(record){
		record.addEvent('update', this.onRecordUpdate.bind(this));
		record.addEvent('remove', this.onRecordDispose.bind(this));
		record.addEvent('select', this.selectRecord.bind(this));
	},

    fireSelect:function(record){
        this.fireEvent('select', record);
    },

	onRecordUpdate:function(record){
		this.indexRecord(record);
		this.fireEvent('update', record);
	},

	onRecordDispose:function(record){
		var branch = this.getBranchFor(record);
		if(branch){
			var index = branch.indexOf(record);
			if(index !== -1){
				branch.splice(index,1);
			}
			this.removeFromIndex(record);
			this.fireEvent('remove', record);
		}
	},

	getBranchFor:function(record){
		if(record.parentUid){
			var parent = this.findRecord(record.parentUid);
			return parent ? parent.children : undefined;
		}else{
			return this.data;
		}
	},

	removeFromIndex:function(record){
		this.recordObjects[record.uid] = undefined;
		this.index[record.uid] = undefined;
		var pk = this.getPrimaryKeyIndexFor(record);
		if(pk)this.index[pk] = undefined;
	},

	getPrimaryKeyIndexFor:function(record){
		if(this.primaryKey){
			var key = [];
			for(var j=0;j&lt;this.primaryKey.length;j++){
				key.push(record[this.primaryKey[j]]);
			}
			return key.join('');
		}
		return undefined;
	}
});

ludo.factory.registerClass('dataSource.Collection', ludo.dataSource.Collection);</pre>
    </article>
</section>





		</div>
	</div>

	<div class="clearfix"></div>

	

</div>
</div>


    <div class="modal fade" id="searchResults">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title">Search results</h4>
          </div>
          <div class="modal-body"></div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          </div>
        </div><!-- /.modal-content -->
      </div><!-- /.modal-dialog -->
    </div>


<footer>


	<span class="copyright">
	 LudoJS.com 2012-2016
	</span>

<span class="jsdoc-message">
	Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.2</a>
	
		on Mon Nov 21st 2016
	
	using the <a href="https://github.com/docstrap/docstrap">DocStrap template</a>.
</span>
</footer>

<script src="scripts/docstrap.lib.js"></script>
<script src="scripts/toc.js"></script>

    <script type="text/javascript" src="scripts/fulltext-search-ui.js"></script>


<script>
$( function () {
	$( "[id*='$']" ).each( function () {
		var $this = $( this );

		$this.attr( "id", $this.attr( "id" ).replace( "$", "__" ) );
	} );

	$( ".tutorial-section pre, .readme-section pre, pre.prettyprint.source" ).each( function () {
		var $this = $( this );

		var example = $this.find( "code" );
		exampleText = example.html();
		var lang = /{@lang (.*?)}/.exec( exampleText );
		if ( lang && lang[1] ) {
			exampleText = exampleText.replace( lang[0], "" );
			example.html( exampleText );
			lang = lang[1];
		} else {
			var langClassMatch = example.parent()[0].className.match(/lang\-(\S+)/);
			lang = langClassMatch ? langClassMatch[1] : "javascript";
		}

		if ( lang ) {

			$this
			.addClass( "sunlight-highlight-" + lang )
			.addClass( "linenums" )
			.html( example.html() );

		}
	} );

	Sunlight.highlightAll( {
		lineNumbers : true,
		showMenu : true,
		enableDoclinks : true
	} );

	$.catchAnchorLinks( {
        navbarOffset: 10
	} );
	$( "#toc" ).toc( {
		anchorName  : function ( i, heading, prefix ) {
			return $( heading ).attr( "id" ) || ( prefix + i );
		},
		selectors   : "#toc-content h1,#toc-content h2,#toc-content h3,#toc-content h4",
		showAndHide : false,
		smoothScrolling: true
	} );

	$( "#main span[id^='toc']" ).addClass( "toc-shim" );
	$( '.dropdown-toggle' ).dropdown();

    $( "table" ).each( function () {
      var $this = $( this );
      $this.addClass('table');
    } );

} );
</script>



<!--Navigation and Symbol Display-->


<!--Google Analytics-->

<script>
	(function ( i, s, o, g, r, a, m ) {
		i['GoogleAnalyticsObject'] = r;
		i[r] = i[r] || function () {
			(i[r].q = i[r].q || []).push( arguments )
		}, i[r].l = 1 * new Date();
		a = s.createElement( o ),
			m = s.getElementsByTagName( o )[0];
		a.async = 1;
		a.src = g;
		m.parentNode.insertBefore( a, m )
	})( window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga' );

	ga( 'create', 'UA-34153510-1', 'http://www.ludojs.com' );
	ga( 'send', 'pageview' );
</script>



    <script type="text/javascript">
        $(document).ready(function() {
            SearcherDisplay.init();
        });
    </script>


</body>
</html>
