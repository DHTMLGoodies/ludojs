<!DOCTYPE html>

<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width">
	<title>LudoJS Source: grid/grid.js</title>

	<!--[if lt IE 9]>
	<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->
	<link type="text/css" rel="stylesheet" href="styles/sunlight.default.css">

	<link type="text/css" rel="stylesheet" href="styles/site.ludojs.css">

</head>

<body>

<div class="navbar navbar-default navbar-fixed-top navbar-inverse">
<div class="container">
	<div class="navbar-header">
		<a class="navbar-brand" href="index.html">LudoJS</a>
		<button class="navbar-toggle" type="button" data-toggle="collapse" data-target="#topNavigation">
			<span class="icon-bar"></span>
			<span class="icon-bar"></span>
			<span class="icon-bar"></span>
        </button>
	</div>
	<div class="navbar-collapse collapse" id="topNavigation">
		<ul class="nav navbar-nav">
			
			<li class="dropdown">
				<a href="modules.list.html" class="dropdown-toggle" data-toggle="dropdown">Modules<b class="caret"></b></a>
				<ul class="dropdown-menu ">
					<li><a href="module-language.html">language</a></li><li><a href="module-ludo.html">ludo</a></li>
				</ul>
			</li>
			
			<li class="dropdown">
				<a href="classes.list.html" class="dropdown-toggle" data-toggle="dropdown">Classes<b class="caret"></b></a>
				<ul class="dropdown-menu ">
					<li><a href="ludo.Application.html">ludo.Application</a></li><li><a href="ludo.calendar.Base.html">ludo.calendar.Base</a></li><li><a href="ludo.calendar.Calendar.html">ludo.calendar.Calendar</a></li><li><a href="ludo.calendar.Days.html">ludo.calendar.Days</a></li><li><a href="ludo.calendar.MonthSelector.html">ludo.calendar.MonthSelector</a></li><li><a href="ludo.calendar.MonthYearSelector.html">ludo.calendar.MonthYearSelector</a></li><li><a href="ludo.calendar.NavBar.html">ludo.calendar.NavBar</a></li><li><a href="ludo.calendar.TimePicker.html">ludo.calendar.TimePicker</a></li><li><a href="ludo.calendar.Today.html">ludo.calendar.Today</a></li><li><a href="ludo.calendar.YearSelector.html">ludo.calendar.YearSelector</a></li><li><a href="ludo.canvas.Canvas.html">ludo.canvas.Canvas</a></li><li><a href="ludo.canvas.Circle.html">ludo.canvas.Circle</a></li><li><a href="ludo.canvas.Curtain.html">ludo.canvas.Curtain</a></li><li><a href="ludo.canvas.Drag.html">ludo.canvas.Drag</a></li><li><a href="ludo.canvas.Ellipse_ludo.canvas.Ellipse.html">ludo.canvas.Ellipse#ludo.canvas.Ellipse</a></li><li><a href="ludo.canvas.Filter.html">ludo.canvas.Filter</a></li><li><a href="ludo.canvas.Gradient.html">ludo.canvas.Gradient</a></li><li><a href="ludo.canvas.Group.html">ludo.canvas.Group</a></li><li><a href="ludo.canvas.Mask.html">ludo.canvas.Mask</a></li><li><a href="ludo.canvas.NamedNode.html">ludo.canvas.NamedNode</a></li><li><a href="ludo.canvas.Node.html">ludo.canvas.Node</a></li><li><a href="ludo.canvas.Paint.html">ludo.canvas.Paint</a></li><li><a href="ludo.canvas.Path.html">ludo.canvas.Path</a></li><li><a href="ludo.canvas.Polygon.html">ludo.canvas.Polygon</a></li><li><a href="ludo.canvas.Polyline.html">ludo.canvas.Polyline</a></li><li><a href="ludo.canvas.RadialGradient.html">ludo.canvas.RadialGradient</a></li><li><a href="ludo.canvas.Rect.html">ludo.canvas.Rect</a></li><li><a href="ludo.canvas.Stop.html">ludo.canvas.Stop</a></li><li><a href="ludo.canvas.Text.html">ludo.canvas.Text</a></li><li><a href="ludo.canvas.TextBox.html">ludo.canvas.TextBox</a></li><li><a href="ludo.canvas.View.html">ludo.canvas.View</a></li><li><a href="ludo.chart.DataProvider.html">ludo.chart.DataProvider</a></li><li><a href="ludo.chart.Labels.html">ludo.chart.Labels</a></li><li><a href="ludo.chart.Pie.html">ludo.chart.Pie</a></li><li><a href="ludo.chart.PieSliceHighlighted.html">ludo.chart.PieSliceHighlighted</a></li><li><a href="ludo.chart.Record.html">ludo.chart.Record</a></li><li><a href="ludo.CollectionView.html">ludo.CollectionView</a></li><li><a href="ludo.color.Color.html">ludo.color.Color</a></li><li><a href="ludo.controller.Controller.html">ludo.controller.Controller</a></li><li><a href="ludo.controller.Manager.html">ludo.controller.Manager</a></li><li><a href="ludo.Core.html">ludo.Core</a></li><li><a href="ludo.dataSource.Base.html">ludo.dataSource.Base</a></li><li><a href="ludo.dataSource.Collection.html">ludo.dataSource.Collection</a></li><li><a href="ludo.dataSource.CollectionSearch.html">ludo.dataSource.CollectionSearch</a></li><li><a href="ludo.dataSource.HTML.html">ludo.dataSource.HTML</a></li><li><a href="ludo.dataSource.JSON.html">ludo.dataSource.JSON</a></li><li><a href="ludo.dataSource.Record.html">ludo.dataSource.Record</a></li><li><a href="ludo.dataSource.SearchParser.html">ludo.dataSource.SearchParser</a></li><li><a href="ludo.dataSource.TreeCollection.html">ludo.dataSource.TreeCollection</a></li><li><a href="ludo.dialog.Alert.html">ludo.dialog.Alert</a></li><li><a href="ludo.dialog.Confirm.html">ludo.dialog.Confirm</a></li><li><a href="ludo.dialog.Dialog.html">ludo.dialog.Dialog</a></li><li><a href="ludo.dialog.Prompt.html">ludo.dialog.Prompt</a></li><li><a href="ludo.effect.Drag.html">ludo.effect.Drag</a></li><li><a href="ludo.effect.DragDrop.html">ludo.effect.DragDrop</a></li><li><a href="ludo.effect.DropPoint.html">ludo.effect.DropPoint</a></li><li><a href="ludo.effect.Effect.html">ludo.effect.Effect</a></li><li><a href="ludo.form.Button.html">ludo.form.Button</a></li><li><a href="ludo.form.CancelButton.html">ludo.form.CancelButton</a></li><li><a href="ludo.form.Checkbox.html">ludo.form.Checkbox</a></li><li><a href="ludo.form.Combo.html">ludo.form.Combo</a></li><li><a href="ludo.form.ComboTree.html">ludo.form.ComboTree</a></li><li><a href="ludo.form.Date.html">ludo.form.Date</a></li><li><a href="ludo.form.DisplayField.html">ludo.form.DisplayField</a></li><li><a href="ludo.form.Element.html">ludo.form.Element</a></li><li><a href="ludo.form.Email.html">ludo.form.Email</a></li><li><a href="ludo.form.File.html">ludo.form.File</a></li><li><a href="ludo.form.Label.html">ludo.form.Label</a></li><li><a href="ludo.form.LabelElement.html">ludo.form.LabelElement</a></li><li><a href="ludo.form.Manager.html">ludo.form.Manager</a></li><li><a href="ludo.form.Number.html">ludo.form.Number</a></li><li><a href="ludo.form.OnOff.html">ludo.form.OnOff</a></li><li><a href="ludo.form.Password.html">ludo.form.Password</a></li><li><a href="ludo.form.Radio.html">ludo.form.Radio</a></li><li><a href="ludo.form.RadioGroup.html">ludo.form.RadioGroup</a></li><li><a href="ludo.form.ResetButton.html">ludo.form.ResetButton</a></li><li><a href="ludo.form.SearchField.html">ludo.form.SearchField</a></li><li><a href="ludo.form.Seekbar.html">ludo.form.Seekbar</a></li><li><a href="ludo.form.Select.html">ludo.form.Select</a></li><li><a href="ludo.form.Spinner.html">ludo.form.Spinner</a></li><li><a href="ludo.form.StrongPassword.html">ludo.form.StrongPassword</a></li><li><a href="ludo.form.SubmitButton.html">ludo.form.SubmitButton</a></li><li><a href="ludo.form.Text.html">ludo.form.Text</a></li><li><a href="ludo.form.Textarea.html">ludo.form.Textarea</a></li><li><a href="ludo.form.TinbyButton.html">ludo.form.TinbyButton</a></li><li><a href="ludo.form.ToggleButton.html">ludo.form.ToggleButton</a></li><li><a href="ludo.form.ToggleGroup.html">ludo.form.ToggleGroup</a></li><li><a href="ludo.form.validator.Base.html">ludo.form.validator.Base</a></li><li><a href="ludo.form.validator.Md5.html">ludo.form.validator.Md5</a></li><li><a href="ludo.FramedView.html">ludo.FramedView</a></li><li><a href="ludo.grid.ColumnManager.html">ludo.grid.ColumnManager</a></li><li><a href="ludo.grid.Grid.html">ludo.grid.Grid</a></li><li><a href="ludo.grid.RowManager.html">ludo.grid.RowManager</a></li><li><a href="ludo.layout.Accordion.html">ludo.layout.Accordion</a></li><li><a href="ludo.layout.Base.html">ludo.layout.Base</a></li><li><a href="ludo.layout.Canvas.html">ludo.layout.Canvas</a></li><li><a href="ludo.layout.Factory.html">ludo.layout.Factory</a></li><li><a href="ludo.layout.Grid.html">ludo.layout.Grid</a></li><li><a href="ludo.layout.LinearVertical.html">ludo.layout.LinearVertical</a></li><li><a href="ludo.layout.Menu.html">ludo.layout.Menu</a></li><li><a href="ludo.layout.NavBar.html">ludo.layout.NavBar</a></li><li><a href="ludo.layout.Popup.html">ludo.layout.Popup</a></li><li><a href="ludo.layout.Relative.html">ludo.layout.Relative</a></li><li><a href="ludo.layout.Renderer.html">ludo.layout.Renderer</a></li><li><a href="ludo.layout.Table.html">ludo.layout.Table</a></li><li><a href="ludo.layout.ViewPager.html">ludo.layout.ViewPager</a></li><li><a href="ludo.menu.Button.html">ludo.menu.Button</a></li><li><a href="ludo.menu.Context.html">ludo.menu.Context</a></li><li><a href="ludo.menu.DropDown.html">ludo.menu.DropDown</a></li><li><a href="ludo.menu.Menu.html">ludo.menu.Menu</a></li><li><a href="ludo.menu.MenuItem.html">ludo.menu.MenuItem</a></li><li><a href="ludo.Notification.html">ludo.Notification</a></li><li><a href="ludo.ObjectFactory.html">ludo.ObjectFactory</a></li><li><a href="ludo.paging.Button.html">ludo.paging.Button</a></li><li><a href="ludo.paging.First.html">ludo.paging.First</a></li><li><a href="ludo.paging.Last.html">ludo.paging.Last</a></li><li><a href="ludo.paging.NavBar.html">ludo.paging.NavBar</a></li><li><a href="ludo.paging.Next.html">ludo.paging.Next</a></li><li><a href="ludo.paging.PageInput.html">ludo.paging.PageInput</a></li><li><a href="ludo.paging.PageSize.html">ludo.paging.PageSize</a></li><li><a href="ludo.paging.TotalPages.html">ludo.paging.TotalPages</a></li><li><a href="ludo.Panel.html">ludo.Panel</a></li><li><a href="ludo.progress.Bar.html">ludo.progress.Bar</a></li><li><a href="ludo.progress.Base.html">ludo.progress.Base</a></li><li><a href="ludo.progress.DataSource.html">ludo.progress.DataSource</a></li><li><a href="ludo.progress.Text.html">ludo.progress.Text</a></li><li><a href="ludo.remote.Broadcaster.html">ludo.remote.Broadcaster</a></li><li><a href="ludo.remote.ErrorMessage.html">ludo.remote.ErrorMessage</a></li><li><a href="ludo.remote.HTML.html">ludo.remote.HTML</a></li><li><a href="ludo.remote.html#.JSON">ludo.remote.JSON</a></li><li><a href="ludo.storage.LocalStorage.html">ludo.storage.LocalStorage</a></li><li><a href="ludo.tpl.Parser.html">ludo.tpl.Parser</a></li><li><a href="ludo.tree.Filter.html">ludo.tree.Filter</a></li><li><a href="ludo.tree.Modifications.html">ludo.tree.Modifications</a></li><li><a href="ludo.tree.Tree.html">ludo.tree.Tree</a></li><li><a href="ludo.video.YouTube.html">ludo.video.YouTube</a></li><li><a href="ludo.View.html">ludo.View</a></li><li><a href="ludo.view.ViewPagerNav.html">ludo.view.ViewPagerNav</a></li><li><a href="ludo.Window.html">ludo.Window</a></li><li><a href="TreeCollectionSearch.html">TreeCollectionSearch</a></li>
				</ul>
			</li>
			
			<li class="dropdown">
				<a href="global.html" class="dropdown-toggle" data-toggle="dropdown">Global<b class="caret"></b></a>
				<ul class="dropdown-menu ">
					<li><a href="global.html#getData">getData</a></li><li><a href="global.html#getSourceType">getSourceType</a></li><li><a href="global.html#hasData">hasData</a></li><li><a href="global.html#loadUrl">loadUrl</a></li><li><a href="global.html#sendRequest">sendRequest</a></li><li><a href="global.html#shim">shim</a></li><li><a href="global.html#toHSV">toHSV</a></li>
				</ul>
			</li>
			
		</ul>
        
            <div class="col-sm-3 col-md-3">
                <form class="navbar-form" role="search">
                    <div class="input-group">
                        <input type="text" class="form-control" placeholder="Search" name="q" id="search-input">
                        <div class="input-group-btn">
                            <button class="btn btn-default" id="search-submit"><i class="glyphicon glyphicon-search"></i></button>
                        </div>
                    </div>
                </form>
            </div>
        
	</div>

</div>
</div>


<div class="container" id="toc-content">
<div class="row">

	
	<div class="col-md-12">
	
		<div id="main">
			

		<h1 class="page-title">Source: grid/grid.js</h1>
    
<section>
    <article>
        <pre
            class="sunlight-highlight-javascript linenums">/**
 @namespace ludo.grid
 @class ludo.grid.Grid
 @augments View
 
 @param {Object} config
 @param {Boolean} config.headerMenu Show menu on each column heading.
 @param {Boolean} config.highlightRecord True to highlight rows on click, default: true
 @param {Boolean} config.mouseOverEffect True to highlight rows on mouse over, default: true.
 @param {Object} config.columns Description of columns. See example below for details.
 @param {Object} config.emptyText Text to show on grid when there are no data, default: "No data"
 @fires ludo.grid.Grid#click Row clicked. Arguments: 1) The record, i.e. JSON Object, example: { "firstname": "Jane", "lastname": "Johnson" } and 2) name of clicked column, example: "lastname"
 @fires ludo.grid.Grid#dblclick Row double clicked. Arguments: 1) The record, i.e. JSON Object, example: { "firstname": "Jane", "lastname": "Johnson" } and 2) name of clicked column, example: "lastname"
 @example
	 children:[
	 ..
	 {
		  id:'myGrid',
		  type:'grid.Grid',
		  stateful:true,
		  resizable:false,

		  columns:{
			  'country':{
				  heading:'Country',
				  removable:false,
				  sortable:true,
				  movable:true,
				  width:200,
				  renderer:function (val) {
					  return '&lt;span style="color:blue">' + val + '&lt;/span>';
				  }
			  },
			  'capital':{
				  heading:'Capital',
				  sortable:true,
				  removable:true,
				  movable:true,
				  width:150
			  },
			  population:{
				  heading:'Population',
				  movable:true,
				  removable:true
			  }
		  },
		  dataSource:{
			  url:'data-source/grid.php',
			  id:'myDataSource',
			  paging:{
				  size:12,
				  remotePaging:false,
				  cache:false,
				  cacheTimeout:1000
			  },
			  searchConfig:{
				  index:['capital', 'country']
			  },
			  listeners:{
				  select:function (record) {
					  console.log(record)
				  },
				   count:function(countRecords){
					   ludo.get('gridWindowSearchable').setTitle('Grid - capital and population - Stateful (' + countRecords + ' records)');
				   }
			  }
		  }

	  }
 	...
 	]
 Is example of code used to add a grid as child view of another view. You may also create the grid directly using:

 @example
 	new ludo.grid.Grid({...})
 where {...} can be the same code as above. use the "renderTo" config property to specify where you want the grid to be rendered.
 */
ludo.grid.Grid = new Class({
	Extends:ludo.View,
	type:'Grid',

	hasMenu:true,
	colMovable:null,
	menu:true,

	menuConfig:[

	],

	scrollbar:{

	},

	highlightRecord:true,

	uniqueId:'',
	activeRecord:{},

	headerMenu:true,


	mouseOverEffect:true,

	columnManager:undefined,

	/*
	 Column config
	 @config {Object} columns
	 @example
	 	columns:{
			 'country':{
				 heading:'Country',
				 sortable:true,
				 movable:true,
				 renderer:function (val) {
					 return '&lt;span style="color:blue">' + val + '&lt;/span>';
				 }
			 },
			 'capital':{
				 heading:'Capital',
				 sortable:true,
				 movable:true
			 },
			 population:{
				 heading:'Population',
				 movable:true
			 }
		 }
	 or nested:

	 	columns:{
			 info:{
				 heading:'Country and Capital',
				 headerAlign:'center',
				 columns:{
					 'country':{
						 heading:'Country',
						 removable:false,
						 sortable:true,
						 movable:true,
						 width:200,
						 renderer:function (val) {
							 return '&lt;span style="color:blue">' + val + '&lt;/span>';
						 }
					 },
					 'capital':{
						 heading:'Capital',
						 sortable:true,
						 removable:true,
						 movable:true,
						 width:150
					 }
				 }
			 },
			 population:{
				 heading:'Population',
				 movable:true,
				 removable:true
			 }
		 }

	 */
	columns:undefined,
	rowManager:undefined,

	emptyText:'No data',

	defaultDS : 'dataSource.Collection',

	__construct:function (config) {
		this.parent(config);

        this.setConfigParams(config, ['columns','fill','headerMenu','columnManager','rowManager','mouseOverEffect','emptyText','highlightRecord']);

		if(this.columnManager){
			ludo.util.warn('Deprecated columnManager used, use columns instead');
		}

		if(!this.columnManager){
			this.columnManager = {
				columns : this.columns,
				fill: this.fill
			};
		}
		if (this.columnManager) {
			if (!this.columnManager.type)this.columnManager.type = 'grid.ColumnManager';
			this.columnManager.stateful = this.stateful;
			this.columnManager.id = this.columnManager.id || this.id + '_cm';
			this.columnManager = this.createDependency('colManager', this.columnManager);
            this.columnManager.addEvents({
                'hidecolumn' : this.refreshData.bind(this),
                'showcolumn' : this.refreshData.bind(this),
                'movecolumn' : this.onColumnMove.bind(this),
                'resize' : this.resizeColumns.bind(this)
            });
		}

		if (this.rowManager) {
			if (!this.rowManager.type)this.rowManager.type = 'grid.RowManager';
			this.rowManager = this.createDependency('rowManager', this.rowManager);
		}
		if (this.stateful &amp;&amp; this.dataSource !== undefined &amp;&amp; ludo.util.isObject(this.dataSource)) {
			this.dataSource.id = this.dataSource.id || this.id + '_ds';
			this.dataSource.stateful = this.stateful;
		}

		this.uniqueId = String.uniqueID();

	},

	ludoDOM:function () {
		this.parent();
		this.getEl().addClass('ludo-grid-Grid');

		var b = this.getBody();
		var t = this.els.dataContainerTop = $('&lt;div>');

		t.addClass('ludo-grid-data-container');
		t.css({
			'overflow':ludo.util.isTabletOrMobile() ? 'auto' : 'hidden',
			'position':'relative'
		});

		b.append(t);
		b.css('overflow', 'visible');

		this.els.dataContainer = $('&lt;div>');
		t.append(this.els.dataContainer);

		this.els.dataContainer.css('position', 'relative');
		this.gridHeader = this.createDependency('gridHeader', {
			type:'grid.GridHeader',
			headerMenu: this.headerMenu,
			columnManager:this.columnManager,
			grid:this
		});
		this.createDataColumnElements();
		this.createScrollbars();
		this.createColResizeHandles();
	},

	ludoEvents:function () {
		this.parent();

		if (this.dataSource) {
			if(this.dataSourceObj &amp;&amp; this.dataSourceObj.hasData()){
				this.populateData();
			}
            this.getDataSource().addEvents({
                'change' : this.populateData.bind(this),
                'select' : this.setSelectedRecord.bind(this),
                'deselect' : this.deselectDOMForRecord.bind(this),
                'update' : this.showUpdatedRecord.bind(this),
                'delete' : this.removeDOMForRecord.bind(this)
            });
            this.getDataSource().addEvent('select', this.selectDOMForRecord.bind(this));
		}
		this.getBody().on('selectstart', ludo.util.cancelEvent);
		this.getBody().on('click', this.cellClick.bind(this));
		this.getBody().on('dblclick', this.cellDoubleClick.bind(this));


		if (this.mouseOverEffect) {
			this.els.dataContainer.on('mouseleave', this.mouseLeavesGrid.bind(this));
		}
	},

	__rendered:function () {
		this.parent();
		this.ifStretchHideLastResizeHandles();

		if (this.highlightRecord) {
			this.els.dataContainer.css('cursor', 'pointer');
		}




		this.positionVerticalScrollbar.delay(100, this);

		if (this.getParent()) {
			this.getParent().getBody().css({
				'padding':0
			});
			ludo.dom.clearCache();
			this.getParent().resize.delay(100, this.getParent());
		}
	},

	currentOverRecord:undefined,
	mouseoverDisabled:false,

	enterCell:function (el) {
		if (this.mouseoverDisabled)return;
		var record = this.getRecordByDOM(el);
		if (record) {
			if (this.currentOverRecord) {
				this.deselectDOMForRecord(this.currentOverRecord, 'ludo-grid-record-over');
			}
			this.currentOverRecord = record;
			this.selectDOMForRecord(record, 'ludo-grid-record-over');
		}
	},

	mouseLeavesGrid:function () {
		if (this.currentOverRecord) {
			this.deselectDOMForRecord(this.currentOverRecord, 'ludo-grid-record-over');
			this.currentOverRecord = undefined;
		}
	},

	cellClick:function (e) {
		var record = this.getRecordByDOM(e.target);
		if (record) {
			this.getDataSource().selectRecord(record);
			this.fireEvent('click', [record, this.getColumnByDom(e.target)]);
		}
	},

	getColumnByDom:function(el){
		el = $(el);
		if (!el.hasClass('ludo-grid-data-cell')) {
			el = el.closest('.ludo-grid-data-cell');
		}
		if(el){
			return el.attr('col');
		}
		return undefined;
	},

	setSelectedRecord:function (record) {
        // TODO should use dataSource.Record object instead of plain object
		this.fireEvent('selectrecord', record);
		this.highlightActiveRecord();
	},

	highlightActiveRecord:function () {
		if (this.highlightRecord) {
			var selectedRecord = this.getDataSource().getSelectedRecord();
			if (selectedRecord &amp;&amp; selectedRecord.uid) {
				this.selectDOMForRecord(selectedRecord, 'ludo-active-record');
			}
		}
	},

	selectDOMForRecord:function (record, cls) {
		cls = cls || 'ludo-active-record';
		var cells = this.getDOMCellsForRecord(record);
		for (var key in cells) {
			if (cells.hasOwnProperty(key)) {
				cells[key].addClass(cls);
			}
		}
	},

	deselectDOMForRecord:function (record, cls) {
		cls = cls || 'ludo-active-record';
		var cells = this.getDOMCellsForRecord(record);
		for (var key in cells) {
			if (cells.hasOwnProperty(key)) {
				cells[key].removeClass(cls);
			}
		}
	},


	showUpdatedRecord:function (record) {
		var cells = this.getDOMCellsForRecord(record);
		var content;
		var renderer;

		for (var key in cells) {
			if (cells.hasOwnProperty(key)) {
				renderer = this.columnManager.getRendererFor(key);
				if (renderer) {
					content = renderer(record[key], record);
				} else {
					content = record[key];
				}
				cells[key].getElement('span').html( content);
			}
		}
	},

	removeDOMForRecord:function (record) {
		var cells = this.getDOMCellsForRecord(record);
		for (var key in cells) {
			if (cells.hasOwnProperty(key)) {
				cells[key].dispose();
			}
		}
	},

	getDOMCellsForRecord:function (record) {
		var ret = {};
		var div, divId;

		var keys = this.columnManager.getLeafKeys();
		for (var i = 0; i &lt; keys.length; i++) {
			var col = this.getBody().find('#ludo-grid-column-' + keys[i] + '-' + this.uniqueId);
			divId = 'cell-' + keys[i] + '-' + record.uid + '-' + this.uniqueId;
			div = col.find('#' + divId);
			if (div) {
				ret[keys[i]] = div;
			}
		}
		return ret;
	},
	/**
	 Select a record.
	 @function selectRecord
	 @param {Object} record
	 @memberof ludo.grid.Grid.prototype
	 @example
	 	grid.selectRecord({ id: 100 } );
	 */
	selectRecord:function (record) {
		if (ludo.util.isString(record)) {
			record = { id:record };
		}
		this.getDataSource().selectRecord(record);
	},

	cellDoubleClick:function (e) {
		var record = this.getRecordByDOM(e.target);
		if (record) {
			this.getDataSource().selectRecord(record);

			this.fireEvent('dblclick', [record, this.getColumnByDom(e.target)]);
		}
	},

	getRecordByDOM:function (el) {
		el = $(el);
		if (!el.hasClass('ludo-grid-data-cell')) {
			el = el.parent('.ludo-grid-data-cell');
		}
		if (el &amp;&amp; el.hasClass('ludo-grid-data-cell')) {
			var uid = el.attr('uid');
			return this.getDataSource().findRecord({uid:uid});
		}
		return undefined;
	},

	isColumnDragActive:function () {
		return this.colMovable &amp;&amp; this.colMovable.isActive();
	},

	hideResizeHandles:function () {
		this.colResizeHandler.hideAllHandles();
	},

	showResizeHandles:function () {
		this.colResizeHandler.showAllHandles();
		this.ifStretchHideLastResizeHandles();
	},

	resizeChildren:function () {
		this.parent();
		if (this.colResizeHandler &amp;&amp; this.columnManager.hasLastColumnDynamicWidth()) {
			this.resizeColumns();
		}
	},

	onColumnMove:function (source, target, pos) {

		if (pos == 'before') {
			this.els.dataColumns[source].insertBefore(this.els.dataColumns[target]);
		} else {
			this.els.dataColumns[source].insertAfter(this.els.dataColumns[target]);
		}
		this.cssColumns();
		this.resizeColumns();

	},

	cssColumns:function () {
		var keys = Object.keys(this.els.dataColumns);
		for (var i = 0; i &lt; keys.length; i++) {
			var c = this.els.dataColumns[keys[i]];
			c.removeClass('ludo-grid-data-last-column');
			c.removeClass('ludo-grid-data-last-column-left');
			c.removeClass('ludo-grid-data-column-left');
			c.removeClass('ludo-grid-data-last-column-center');
			c.removeClass('ludo-grid-data-column-center');
			c.removeClass('ludo-grid-data-last-column-right');
			c.removeClass('ludo-grid-data-column-right');
			ludo.dom.addClass(c, this.getColumnCssClass(keys[i]));
		}
	},

	refreshData:function () {
		if (!this.isRendered)return;
		this.createDataColumnElements();
		this.resizeColumns();
		this.populateData();
		this.showResizeHandles();
	},

	insertJSON:function () {

	},

	addRecord:function (record) {
		this.getDataSource().addRecord(record);
	},

	resizeDOM:function () {
		this.resizeColumns();
		var height = this.getHeight() - ludo.dom.getMBPH(this.els.container) - ludo.dom.getMBPH(this.els.body);
		height -= this.scrollbar.horizontal.getHeight();
		if (height &lt; 0) {
			return;
		}
		this.els.body.css('height', height);
		this.cachedInnerHeight = height;


		var contentHeight = this.getBody().height();

		if (contentHeight == 0) {
			this.resizeDOM.delay(100, this);
			return;
		}
		this.els.dataContainerTop.css('height', contentHeight - this.gridHeader.getHeight());

		this.scrollbar.vertical.resize();
		this.scrollbar.horizontal.resize();
	},

	createScrollbars:function () {
		this.scrollbar.horizontal = this.createDependency('scrollHorizontal', new ludo.Scroller({
			type:'horizontal',
			applyTo:this.getBody(),
			parent:this.getBody()
		}));
		this.scrollbar.horizontal.getEl().insertBefore(this.getBody());

		this.scrollbar.vertical = this.createDependency('scrollVertical', new ludo.Scroller({
			type:'vertical',
			applyTo:this.els.dataContainer,
			parent:this.els.dataContainerTop,
			mouseWheelSizeCls:'ludo-grid-data-cell'
		}));
		this.getEl().append(this.scrollbar.vertical.getEl());
		this.positionVerticalScrollbar();
	},

	positionVerticalScrollbar:function () {
		var top = this.gridHeader.getHeight();
		if (top == 0) {
			this.positionVerticalScrollbar.delay(100, this);
			return;
		}
		this.scrollbar.vertical.getEl().css('top', top);
	},

	sortBy:function (key) {
		this.getDataSource().sortBy(key);
	},

	createColResizeHandles:function () {
		this.colResizeHandler = new ludo.ColResize({
			component:this,
			listeners:{
				startresize:this.setResizePos.bind(this),
				resize:this.resizeColumn.bind(this)
			}
		});
		var keys = this.columnManager.getLeafKeys();
		for (var i = 0; i &lt; keys.length; i++) {
			var el = this.colResizeHandler.getHandle(keys[i], this.columnManager.isResizable(keys[i]));
			this.getBody().append(el);
			el.addClass('ludo-grid-resize-handle');
		}
	},

	setResizePos:function (column) {
		this.colResizeHandler.setMinPos(this.columnManager.getMinPosOf(column));
		this.colResizeHandler.setMaxPos(this.columnManager.getMaxPosOf(column));
		this.mouseoverDisabled = true;
		this.mouseLeavesGrid();
	},

	mouseOverResizeHandle:function (e) {
		$(e.target).addClass('ludo-grid-resize-handle-over');
	},
	mouseOutResizeHandle:function (e) {
		$(e.target).removeClass('ludo-grid-resize-handle-over');
	},

	resizeColumns:function () {
		this.mouseoverDisabled = false;
		var leftPos = 0;

		this.stretchLastColumn();
		var columns = this.columnManager.getLeafKeys();

		for (var i = 0; i &lt; columns.length; i++) {
			if (this.columnManager.isHidden(columns[i])) {
				this.colResizeHandler.hideHandle(columns[i]);
			} else {
				var width = this.columnManager.getWidthOf(columns[i]);
                var bw = ludo.dom.getBW(this.els.dataColumns[columns[i]]) - (i===columns.length-1) ? 1 : 0;
                this.els.dataColumns[columns[i]].css('left', leftPos);
                this.els.dataColumns[columns[i]].css('width', (width - ludo.dom.getPW(this.els.dataColumns[columns[i]]) - bw));

				this.columnManager.setLeft(columns[i], leftPos);

				leftPos += width;

				this.colResizeHandler.setPos(columns[i], leftPos);
				if (this.columnManager.isResizable(columns[i])) {
					this.colResizeHandler.showHandle(columns[i]);
				} else {
					this.colResizeHandler.hideHandle(columns[i]);
				}
			}
		}

		var totalWidth = this.columnManager.getTotalWidth();
		this.els.dataContainerTop.css('width', totalWidth);
		this.scrollbar.horizontal.setContentSize(totalWidth);

	},

	stretchLastColumn:function () {
		if (this.columnManager.hasLastColumnDynamicWidth()) {

			this.columnManager.clearStretchedWidths();

			var totalWidth = this.columnManager.getTotalWidth();
			var viewSize = this.getBody().width() - ludo.dom.getPW(this.getBody()) - ludo.dom.getBW(this.getBody());
			var restSize = viewSize - totalWidth;
			if (restSize &lt;= 0) {
				return;
			}
			var width = this.columnManager.getWidthOf(this.columnManager.getLastVisible()) + restSize;
			this.columnManager.setStretchedWidth(width)
		}
	},

	populateData:function () {

		this.fireEvent('state');
		this.currentOverRecord = undefined;
		this.currentData = this.getDataSource().getData();

		if(this.emptyText){
			this.emptyTextEl().css('display', this.currentData.length > 0 ? 'none' : '');
		}

		if (Browser['ie']) {
			this.populateDataIE();
			return;
		}
		var contentHtml = [];
		var keys = this.columnManager.getLeafKeys();
		for (var i = 0; i &lt; keys.length; i++) {
			var columnId = 'ludo-grid-column-' + keys[i] + '-' + this.uniqueId;
			if (this.columnManager.isHidden(keys[i])) {
				contentHtml.push('&lt;div id="' + columnId + '" class="ludo-grid-data-column" style="display:none">&lt;/div>');
			} else {
				contentHtml.push('&lt;div id="' + columnId + '" col="' + keys[i] + '" class="ludo-grid-data-column ludo-grid-data-column-' + i + ' ' + this.getColumnCssClass(keys[i]) + '">' + this.getHtmlTextForColumn(keys[i]) + '&lt;/div>');
			}
		}

		this.els.dataContainer.html(contentHtml.join(''));

		var columns = this.els.dataContainer.find('.ludo-grid-data-column');
		this.els.dataColumns = {};
		var count;
		for (i = 0, count = columns.length; i &lt; count; i++) {

			this.els.dataColumns[$(columns[i]).attr('col')] = $(columns[i]);
		}

		this.fireEvent('renderdata', [this, this]);
		this.resizeColumns();
		this.resizeVerticalScrollbar();
		this.highlightActiveRecord();
	},


	emptyTextEl:function(){
		if(this.els.emptyText === undefined){
			this.els.emptyText = $('&lt;div class="ludo-grid-empty-text">' + this.emptyText + '&lt;/div>');
			this.getEl().append(this.els.emptyText);

		}
		return this.els.emptyText;
	},

	getColumnCssClass:function (col) {
		var ret;
		if (this.columnManager.isLastVisibleColumn(col)) {
			ret = 'ludo-grid-data-last-column ludo-grid-data-last-column-';
		} else {
			ret = 'ludo-grid-data-column-';
		}
		ret += this.columnManager.getAlignmentOf(col);
		return ret;
	},

	populateDataIE:function () {
		this.els.dataContainer.html( '');
		this.createDataColumnElements();
		this.resizeColumns();
		var keys = this.columnManager.getLeafKeys();

		for (var i = 0; i &lt; keys.length; i++) {
			if (this.columnManager.isHidden(keys[i])) {
				this.els.dataColumns[keys[i]].css('display', 'none');
			} else {
				this.els.dataColumns[keys[i]].css('display', '');
				this.els.dataColumns[keys[i]].html(this.getHtmlTextForColumn(keys[i]));
			}
		}
		this.resizeVerticalScrollbar();
		this.highlightActiveRecord();
	},

	resizeVerticalScrollbar:function () {
		var column = this.els.dataColumns[this.columnManager.getLastVisible()];
		if (!column) {
			return;
		}
		var height = column.outerHeight();

		if (height === 0) {
			this.resizeVerticalScrollbar.delay(300, this);
		} else {
			this.els.dataContainer.css('height', height);
			this.scrollbar.vertical.setContentSize();
		}
	},

	createDataColumnElements:function () {
		this.els.dataColumns = {};
		var keys = this.columnManager.getLeafKeys();
		for (var i = 0; i &lt; keys.length; i++) {
			var el = $('&lt;div>');
			this.els.dataContainer.append(el);
			el.addClass('ludo-grid-data-column');
			
			el.attr('col', keys[i]);
			el.addClass(this.getColumnCssClass(i));
			el.id = 'ludo-grid-column-' + keys[i] + '-' + this.uniqueId;
			this.els.dataColumns[keys[i]] = el;
		}
	},

	getHtmlTextForColumn:function (col) {
		var ret = [];
		var rowClasses = ['ludo-grid-data-odd-row', 'ludo-grid-data-even-row'];
		var content;
		var data = this.currentData;
		if (!data)return '';

		var renderer = this.columnManager.getRendererFor(col);

		var rowRenderer = this.rowManager ? this.rowManager.rowCls : undefined;
		var rowCls = '';
		for (var i = 0, count = data.length; i &lt; count; i++) {
			content = data[i][col];
			if (renderer) {
				content = renderer(content, data[i]);
			}
			var id = ['cell-' , col , '-' , data[i].uid , '-' , this.uniqueId].join('');
			var over = this.mouseOverEffect ? ' onmouseover="ludo.get(\'' + this.id + '\').enterCell(this)"' : '';
			if (rowRenderer) {
				rowCls = rowRenderer(data[i]);
				if (rowCls)rowCls = ' ' + rowCls;
			}
			ret.push('&lt;div id="' + id + '" ' + over + ' col="' + col + '" class="ludo-grid-data-cell ' + (rowClasses[i % 2]) + rowCls + '" uid="' + data[i].uid + '">&lt;span class="ludo-grid-data-cell-text">' + content + '&lt;/span>&lt;/div>');
		}

		return ret.join('');
	},

	resizeColumn:function (col, resizedBy) {
		this.columnManager.increaseWithFor(col, resizedBy);
	},

	ifStretchHideLastResizeHandles:function () {
		if (this.columnManager.hasLastColumnDynamicWidth()) {
			this.colResizeHandler.hideHandle(this.columnManager.getLastVisible());
		}
	},

	scrollBy:function (x, y) {
		if (y) {
			this.scrollbar.vertical.scrollBy(y);
		}
		if (x) {
			this.scrollbar.horizontal.scrollBy(x);
		}
	},

	getSelectedRecord:function () {
		return this.getDataSource().getSelectedRecord();
	},

	getColumnManager:function(){
		return this.columnManager;
	}
});</pre>
    </article>
</section>





		</div>
	</div>

	<div class="clearfix"></div>

	

</div>
</div>


    <div class="modal fade" id="searchResults">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title">Search results</h4>
          </div>
          <div class="modal-body"></div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          </div>
        </div><!-- /.modal-content -->
      </div><!-- /.modal-dialog -->
    </div>


<footer>


	<span class="copyright">
	© LudoJS.com 2012-2016
	</span>

<span class="jsdoc-message">
	Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.2</a>
	
		on Wed Nov 30th 2016
	
	using the <a href="https://github.com/docstrap/docstrap">DocStrap template</a>.
</span>
</footer>

<script src="scripts/docstrap.lib.js"></script>
<script src="scripts/toc.js"></script>

    <script type="text/javascript" src="scripts/fulltext-search-ui.js"></script>


<script>
$( function () {
	$( "[id*='$']" ).each( function () {
		var $this = $( this );

		$this.attr( "id", $this.attr( "id" ).replace( "$", "__" ) );
	} );

	$( ".tutorial-section pre, .readme-section pre, pre.prettyprint.source" ).each( function () {
		var $this = $( this );

		var example = $this.find( "code" );
		exampleText = example.html();
		var lang = /{@lang (.*?)}/.exec( exampleText );
		if ( lang && lang[1] ) {
			exampleText = exampleText.replace( lang[0], "" );
			example.html( exampleText );
			lang = lang[1];
		} else {
			var langClassMatch = example.parent()[0].className.match(/lang\-(\S+)/);
			lang = langClassMatch ? langClassMatch[1] : "javascript";
		}

		if ( lang ) {

			$this
			.addClass( "sunlight-highlight-" + lang )
			.addClass( "linenums" )
			.html( example.html() );

		}
	} );

	Sunlight.highlightAll( {
		lineNumbers : true,
		showMenu : true,
		enableDoclinks : true
	} );

	$.catchAnchorLinks( {
        navbarOffset: 10
	} );
	$( "#toc" ).toc( {
		anchorName  : function ( i, heading, prefix ) {
			return $( heading ).attr( "id" ) || ( prefix + i );
		},
		selectors   : "#toc-content h1,#toc-content h2,#toc-content h3,#toc-content h4",
		showAndHide : false,
		smoothScrolling: true
	} );

	$( "#main span[id^='toc']" ).addClass( "toc-shim" );
	$( '.dropdown-toggle' ).dropdown();

    $( "table" ).each( function () {
      var $this = $( this );
      $this.addClass('table');
    } );

} );
</script>



<!--Navigation and Symbol Display-->


<!--Google Analytics-->

<script>
	(function ( i, s, o, g, r, a, m ) {
		i['GoogleAnalyticsObject'] = r;
		i[r] = i[r] || function () {
			(i[r].q = i[r].q || []).push( arguments )
		}, i[r].l = 1 * new Date();
		a = s.createElement( o ),
			m = s.getElementsByTagName( o )[0];
		a.async = 1;
		a.src = g;
		m.parentNode.insertBefore( a, m )
	})( window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga' );

	ga( 'create', 'UA-34153510-1', 'http://www.ludojs.com' );
	ga( 'send', 'pageview' );
</script>



    <script type="text/javascript">
        $(document).ready(function() {
            SearcherDisplay.init();
        });
    </script>


</body>
</html>
