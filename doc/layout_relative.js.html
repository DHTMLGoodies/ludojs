<!DOCTYPE html>

<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width">
	<title>LudoJS Source: layout/relative.js</title>

	<!--[if lt IE 9]>
	<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->
	<link type="text/css" rel="stylesheet" href="styles/sunlight.default.css">

	<link type="text/css" rel="stylesheet" href="styles/site.ludojs.css">

</head>

<body>

<div class="navbar navbar-default navbar-fixed-top navbar-inverse">
<div class="container">
	<div class="navbar-header">
		<a class="navbar-brand" href="index.html">LudoJS</a>
		<button class="navbar-toggle" type="button" data-toggle="collapse" data-target="#topNavigation">
			<span class="icon-bar"></span>
			<span class="icon-bar"></span>
			<span class="icon-bar"></span>
        </button>
	</div>
	<div class="navbar-collapse collapse" id="topNavigation">
		<ul class="nav navbar-nav">
			
			<li class="dropdown">
				<a href="modules.list.html" class="dropdown-toggle" data-toggle="dropdown">Modules<b class="caret"></b></a>
				<ul class="dropdown-menu ">
					<li><a href="module-language.html">language</a></li><li><a href="module-ludo.html">ludo</a></li>
				</ul>
			</li>
			
			<li class="dropdown">
				<a href="classes.list.html" class="dropdown-toggle" data-toggle="dropdown">Classes<b class="caret"></b></a>
				<ul class="dropdown-menu ">
					<li><a href="ludo.Application.html">ludo.Application</a></li><li><a href="ludo.calendar.Base.html">ludo.calendar.Base</a></li><li><a href="ludo.calendar.Calendar.html">ludo.calendar.Calendar</a></li><li><a href="ludo.calendar.Days.html">ludo.calendar.Days</a></li><li><a href="ludo.calendar.MonthSelector.html">ludo.calendar.MonthSelector</a></li><li><a href="ludo.calendar.MonthYearSelector.html">ludo.calendar.MonthYearSelector</a></li><li><a href="ludo.calendar.NavBar.html">ludo.calendar.NavBar</a></li><li><a href="ludo.calendar.TimePicker.html">ludo.calendar.TimePicker</a></li><li><a href="ludo.calendar.Today.html">ludo.calendar.Today</a></li><li><a href="ludo.calendar.YearSelector.html">ludo.calendar.YearSelector</a></li><li><a href="ludo.canvas.Canvas.html">ludo.canvas.Canvas</a></li><li><a href="ludo.canvas.Circle.html">ludo.canvas.Circle</a></li><li><a href="ludo.canvas.Curtain.html">ludo.canvas.Curtain</a></li><li><a href="ludo.canvas.Drag.html">ludo.canvas.Drag</a></li><li><a href="ludo.canvas.Ellipse_ludo.canvas.Ellipse.html">ludo.canvas.Ellipse#ludo.canvas.Ellipse</a></li><li><a href="ludo.canvas.Filter.html">ludo.canvas.Filter</a></li><li><a href="ludo.canvas.Gradient.html">ludo.canvas.Gradient</a></li><li><a href="ludo.canvas.Group.html">ludo.canvas.Group</a></li><li><a href="ludo.canvas.Mask.html">ludo.canvas.Mask</a></li><li><a href="ludo.canvas.NamedNode.html">ludo.canvas.NamedNode</a></li><li><a href="ludo.canvas.Node.html">ludo.canvas.Node</a></li><li><a href="ludo.canvas.Paint.html">ludo.canvas.Paint</a></li><li><a href="ludo.canvas.Path.html">ludo.canvas.Path</a></li><li><a href="ludo.canvas.Polygon.html">ludo.canvas.Polygon</a></li><li><a href="ludo.canvas.Polyline.html">ludo.canvas.Polyline</a></li><li><a href="ludo.canvas.RadialGradient.html">ludo.canvas.RadialGradient</a></li><li><a href="ludo.canvas.Rect.html">ludo.canvas.Rect</a></li><li><a href="ludo.canvas.Stop.html">ludo.canvas.Stop</a></li><li><a href="ludo.canvas.Text.html">ludo.canvas.Text</a></li><li><a href="ludo.canvas.TextBox.html">ludo.canvas.TextBox</a></li><li><a href="ludo.canvas.View.html">ludo.canvas.View</a></li><li><a href="ludo.chart.DataProvider.html">ludo.chart.DataProvider</a></li><li><a href="ludo.chart.Labels.html">ludo.chart.Labels</a></li><li><a href="ludo.chart.Pie.html">ludo.chart.Pie</a></li><li><a href="ludo.chart.PieSliceHighlighted.html">ludo.chart.PieSliceHighlighted</a></li><li><a href="ludo.chart.Record.html">ludo.chart.Record</a></li><li><a href="ludo.CollectionView.html">ludo.CollectionView</a></li><li><a href="ludo.color.Color.html">ludo.color.Color</a></li><li><a href="ludo.controller.Controller.html">ludo.controller.Controller</a></li><li><a href="ludo.controller.Manager.html">ludo.controller.Manager</a></li><li><a href="ludo.Core.html">ludo.Core</a></li><li><a href="ludo.dataSource.Collection.html">ludo.dataSource.Collection</a></li><li><a href="ludo.dataSource.CollectionSearch.html">ludo.dataSource.CollectionSearch</a></li><li><a href="ludo.dataSource.HTML.html">ludo.dataSource.HTML</a></li><li><a href="ludo.dataSource.JSON.html">ludo.dataSource.JSON</a></li><li><a href="ludo.dataSource.Record.html">ludo.dataSource.Record</a></li><li><a href="ludo.dataSource.SearchParser.html">ludo.dataSource.SearchParser</a></li><li><a href="ludo.dataSource.TreeCollection.html">ludo.dataSource.TreeCollection</a></li><li><a href="ludo.dialog.Alert.html">ludo.dialog.Alert</a></li><li><a href="ludo.dialog.Confirm.html">ludo.dialog.Confirm</a></li><li><a href="ludo.dialog.Dialog.html">ludo.dialog.Dialog</a></li><li><a href="ludo.dialog.Prompt.html">ludo.dialog.Prompt</a></li><li><a href="ludo.effect.Drag.html">ludo.effect.Drag</a></li><li><a href="ludo.effect.DragDrop.html">ludo.effect.DragDrop</a></li><li><a href="ludo.effect.DropPoint.html">ludo.effect.DropPoint</a></li><li><a href="ludo.effect.Effect.html">ludo.effect.Effect</a></li><li><a href="ludo.form.Button.html">ludo.form.Button</a></li><li><a href="ludo.form.CancelButton.html">ludo.form.CancelButton</a></li><li><a href="ludo.form.Checkbox.html">ludo.form.Checkbox</a></li><li><a href="ludo.form.Combo.html">ludo.form.Combo</a></li><li><a href="ludo.form.ComboTree.html">ludo.form.ComboTree</a></li><li><a href="ludo.form.Date.html">ludo.form.Date</a></li><li><a href="ludo.form.DisplayField.html">ludo.form.DisplayField</a></li><li><a href="ludo.form.Element.html">ludo.form.Element</a></li><li><a href="ludo.form.Email.html">ludo.form.Email</a></li><li><a href="ludo.form.File.html">ludo.form.File</a></li><li><a href="ludo.form.Label.html">ludo.form.Label</a></li><li><a href="ludo.form.Manager.html">ludo.form.Manager</a></li><li><a href="ludo.form.Number.html">ludo.form.Number</a></li><li><a href="ludo.form.OnOffSwitch.html">ludo.form.OnOffSwitch</a></li><li><a href="ludo.form.Password.html">ludo.form.Password</a></li><li><a href="ludo.form.Radio.html">ludo.form.Radio</a></li><li><a href="ludo.form.RadioGroup.html">ludo.form.RadioGroup</a></li><li><a href="ludo.form.ResetButton.html">ludo.form.ResetButton</a></li><li><a href="ludo.form.SearchField.html">ludo.form.SearchField</a></li><li><a href="ludo.form.Seekbar.html">ludo.form.Seekbar</a></li><li><a href="ludo.form.Select.html">ludo.form.Select</a></li><li><a href="ludo.form.Spinner.html">ludo.form.Spinner</a></li><li><a href="ludo.form.StrongPassword.html">ludo.form.StrongPassword</a></li><li><a href="ludo.form.SubmitButton.html">ludo.form.SubmitButton</a></li><li><a href="ludo.form.Text.html">ludo.form.Text</a></li><li><a href="ludo.form.Textarea.html">ludo.form.Textarea</a></li><li><a href="ludo.form.TinbyButton.html">ludo.form.TinbyButton</a></li><li><a href="ludo.form.ToggleButton.html">ludo.form.ToggleButton</a></li><li><a href="ludo.form.ToggleGroup.html">ludo.form.ToggleGroup</a></li><li><a href="ludo.form.validator.Base.html">ludo.form.validator.Base</a></li><li><a href="ludo.form.validator.Md5.html">ludo.form.validator.Md5</a></li><li><a href="ludo.FramedView.html">ludo.FramedView</a></li><li><a href="ludo.grid.ColumnManager.html">ludo.grid.ColumnManager</a></li><li><a href="ludo.grid.Grid.html">ludo.grid.Grid</a></li><li><a href="ludo.grid.RowManager.html">ludo.grid.RowManager</a></li><li><a href="ludo.layout.Accordion.html">ludo.layout.Accordion</a></li><li><a href="ludo.layout.Base.html">ludo.layout.Base</a></li><li><a href="ludo.layout.Canvas.html">ludo.layout.Canvas</a></li><li><a href="ludo.layout.Factory.html">ludo.layout.Factory</a></li><li><a href="ludo.layout.Grid.html">ludo.layout.Grid</a></li><li><a href="ludo.layout.LinearVertical.html">ludo.layout.LinearVertical</a></li><li><a href="ludo.layout.Menu.html">ludo.layout.Menu</a></li><li><a href="ludo.layout.NavBar.html">ludo.layout.NavBar</a></li><li><a href="ludo.layout.Popup.html">ludo.layout.Popup</a></li><li><a href="ludo.layout.Relative.html">ludo.layout.Relative</a></li><li><a href="ludo.layout.Renderer.html">ludo.layout.Renderer</a></li><li><a href="ludo.layout.Table.html">ludo.layout.Table</a></li><li><a href="ludo.layout.ViewPager.html">ludo.layout.ViewPager</a></li><li><a href="ludo.menu.Button.html">ludo.menu.Button</a></li><li><a href="ludo.menu.Context.html">ludo.menu.Context</a></li><li><a href="ludo.menu.DropDown.html">ludo.menu.DropDown</a></li><li><a href="ludo.menu.Menu.html">ludo.menu.Menu</a></li><li><a href="ludo.menu.MenuItem.html">ludo.menu.MenuItem</a></li><li><a href="ludo.Notification.html">ludo.Notification</a></li><li><a href="ludo.ObjectFactory.html">ludo.ObjectFactory</a></li><li><a href="ludo.paging.Button.html">ludo.paging.Button</a></li><li><a href="ludo.paging.First.html">ludo.paging.First</a></li><li><a href="ludo.paging.Last.html">ludo.paging.Last</a></li><li><a href="ludo.paging.NavBar.html">ludo.paging.NavBar</a></li><li><a href="ludo.paging.Next.html">ludo.paging.Next</a></li><li><a href="ludo.paging.PageInput.html">ludo.paging.PageInput</a></li><li><a href="ludo.paging.PageSize.html">ludo.paging.PageSize</a></li><li><a href="ludo.paging.TotalPages.html">ludo.paging.TotalPages</a></li><li><a href="ludo.Panel.html">ludo.Panel</a></li><li><a href="ludo.progress.Bar.html">ludo.progress.Bar</a></li><li><a href="ludo.progress.Base.html">ludo.progress.Base</a></li><li><a href="ludo.progress.DataSource.html">ludo.progress.DataSource</a></li><li><a href="ludo.progress.Text.html">ludo.progress.Text</a></li><li><a href="ludo.remote.Broadcaster.html">ludo.remote.Broadcaster</a></li><li><a href="ludo.remote.ErrorMessage.html">ludo.remote.ErrorMessage</a></li><li><a href="ludo.remote.HTML.html">ludo.remote.HTML</a></li><li><a href="ludo.remote.html#.JSON">ludo.remote.JSON</a></li><li><a href="ludo.storage.LocalStorage.html">ludo.storage.LocalStorage</a></li><li><a href="ludo.tpl.Parser.html">ludo.tpl.Parser</a></li><li><a href="ludo.tree.Filter.html">ludo.tree.Filter</a></li><li><a href="ludo.tree.Modifications.html">ludo.tree.Modifications</a></li><li><a href="ludo.tree.Tree.html">ludo.tree.Tree</a></li><li><a href="ludo.video.YouTube.html">ludo.video.YouTube</a></li><li><a href="ludo.View.html">ludo.View</a></li><li><a href="ludo.view.ViewPagerNav.html">ludo.view.ViewPagerNav</a></li><li><a href="ludo.Window.html">ludo.Window</a></li><li><a href="TreeCollectionSearch.html">TreeCollectionSearch</a></li>
				</ul>
			</li>
			
			<li class="dropdown">
				<a href="events.list.html" class="dropdown-toggle" data-toggle="dropdown">Events<b class="caret"></b></a>
				<ul class="dropdown-menu ">
					<li><a href="global.html#event:drag">event:drag</a></li><li><a href="ludo.effect.Drag.html#event:animationComplete">ludo.effect.Drag#event:animationComplete</a></li><li><a href="ludo.effect.Effect.html#event:animationComplete">ludo.effect.Effect#event:animationComplete</a></li>
				</ul>
			</li>
			
		</ul>
        
            <div class="col-sm-3 col-md-3">
                <form class="navbar-form" role="search">
                    <div class="input-group">
                        <input type="text" class="form-control" placeholder="Search" name="q" id="search-input">
                        <div class="input-group-btn">
                            <button class="btn btn-default" id="search-submit"><i class="glyphicon glyphicon-search"></i></button>
                        </div>
                    </div>
                </form>
            </div>
        
	</div>

</div>
</div>


<div class="container" id="toc-content">
<div class="row">

	
	<div class="col-md-12">
	
		<div id="main">
			

		<h1 class="page-title">Source: layout/relative.js</h1>
    
<section>
    <article>
        <pre
            class="sunlight-highlight-javascript linenums">/**
 Relative Layout. This layout will render children relative to each other based on the rules defined below.
 For a demo, see &lt;a href="../demo/layout/relative.php" onclick="var w=window.open(this.href);return false">Relative layout demo&lt;/a>.
 @namespace ludo.layout
 @class ludo.layout.Relative
 @param {object} config
 @summary layout: {type: "relative" }
 @param {number|string} config.width Width in Pixels or "matchParent". 
 @param {number|string} config.height Height in pixels or "matchParent"
 @param {Boolean} config.alignParentTop Align at top edge of parent view
 @param {Boolean} config.alignParentBottom Align bottom of this view with the bottom of parent view
 @param {Boolean} config.alignParentLeft Align left in parent
 @param {Boolean} config.alignParentRight Right align inside parent
 @param {String} config.leftOf Align left of sibling with this id
 @param {String} config.rightOf Align right of sibling with this id
 @param {String} config.below Align below sibling with this id
 @param {String} config.above Align above sibling with this id
 @param {String} config.alignLeft Same left position as sibling with this id.
 @param {String} config.alignRight Same right position as sibling with this id
 @param {String} config.alignTop Same top position as sibling with this id
 @param {String} config.alignBottom Same bottom edge as sibling with this id
 @param {String} config.sameWidthAs Same width as sibling with this id
 @param {String} config.sameHeightAs Same height as sibling with this id
 @param {Boolean} config.centerInParent True to Center view inside parent
 @param {Boolean} config.centerHorizontal True to Center view horizontally inside parent
 @param {Boolean} config.centerVertical True to Center View vertically inside parent
 @param {Boolean} config.fillLeft True to use all remaining space left of view. (left pos will be 0)
 @param {Boolean} config.fillRight True to use all remaining space right of view.
 @param {Boolean} config.fillUp True to use all remaining space above view. (top pos will be 0)
 @param {Number} config.absLeft Absolute pixel value for left position
 @param {Number} config.absRight Absolute pixel value for right position
 @param {Number} config.absTop Absolute pixel value for top position
 @param {Number} config.absBottom Absolute pixel value for bottom position
 @param {Number} config.offsetX After positioning the view, offset left position with these number of pixels.
 @param {Number} config.offsetY After positioning the view, offset top position with these number of pixels.
 @param {Array} config.resize Make the view resizable in these directions(left|right|above|below).
 @example
 var view = new ludo.View({
 	layout:{
 		width:'matchParent',height:'matchParent',
 		type:'relative' // Render children in relative layout
 	},
 	children:[ // array of relative positioned children
 	{
 		// Center this view inside parent
		{ id:'child1', html: 'First View', layout:{ centerInParent:true,width:200,height:200}},
		// Render below "child1" and align it with "child1"
		{ id:'child2', html: 'Second View', layout:{ below:'child1', alignLeft:'child1', width:300,height:50 }
 	}]
 });
 */
ludo.layout.Relative = new Class({
	Extends:ludo.layout.Base,
	children:undefined,
    /*
     * Array of valid layout properties
     * @property {Array} layoutFnProperties
     * @private
     */
	layoutFnProperties:[
		'width', 'height',
		'alignParentTop', 'alignParentBottom', 'alignParentLeft', 'alignParentRight',
		'leftOf', 'rightOf', 'below', 'above',
		'alignLeft', 'alignRight', 'alignTop', 'alignBottom',
		'sameWidthAs', 'sameHeightAs',
		'centerInParent', 'centerHorizontal', 'centerVertical',
		'fillLeft', 'fillRight', 'fillUp', 'fillDown',
		'absBottom','absWidth','absHeight','absLeft','absTop','absRight','offsetX','offsetY'
	],

	newChildCoordinates:{},
	lastChildCoordinates:{},

	onCreate:function () {
		this.parent();
		this.view.getBody().css('position', 'relative');

	},

	resize:function () {
		if (this.children === undefined) {
			this.prepareResize();
		}
		for (var i = 0; i &lt; this.children.length; i++) {
            if(!this.children[i].layoutResizeFn){
                this.children[i].layoutResizeFn = this.getResizeFnFor(this.children[i]);
            }
			this.children[i].layoutResizeFn.call(this.children[i], this);
		}
	},

    /*
     * No resize done yet, create resize functions
     * @function prepareResize
     * @private
     */
	prepareResize:function( ){
		this.fixLayoutReferences();
		this.arrangeChildren();
     	this.createResizeFunctions();
	},

	createResizeFunctions:function () {
		for (var i = 0; i &lt; this.children.length; i++) {
			this.children[i].layoutResizeFn = this.getResizeFnFor(this.children[i]);
		}
	},


	fixLayoutReferences:function () {
		for (var i = 0; i &lt; this.view.children.length; i++) {
			var c = this.view.children[i];
			var k = this.depKeys;
			for (var j = 0; j &lt; k.length; j++) {
				if (c.layout[k[j]] !== undefined)c.layout[k[j]] = this.getReference(c.layout[k[j]]);
			}
		}
	},

	getResizeFnFor:function (child) {
		var fns = this.getLayoutFnsFor(child);
		return function (layoutManager) {
			for (var i = 0; i &lt; fns.length; i++) {
				fns[i].call(child, layoutManager);
			}
		};
	},

	getLayoutFnsFor:function (child) {
		var ret = [];
		var p = this.layoutFnProperties;
		for (var i = 0; i &lt; p.length; i++) {
			if (child.layout[p[i]] !== undefined &amp;&amp; child.layout[p[i]] !== false) {
				var fn = this.getLayoutFn(p[i], child);
				if (fn)ret.push(fn);
			}
		}
		ret.push(this.getLastLayoutFn(child));
		return ret;
	},
    /*
     Return one resize function for a child

        getLayoutFn(left, view)
     may return
        function(){
            this.newChildCoordinates[view.id]['left'] = 20;
        }
     The resize functions are created before first resize is made. For second resize,
     the layout functions for each view will simply be called. This is done for optimal performance
     so that we don't need to calculate more than we have to(Only first time).
     */
	getLayoutFn:function (property, child) {
		var c = this.newChildCoordinates[child.id];
		var refC;
		switch (property) {
			case 'top':
			case 'left':
				return function () {
					c[property] = child.layout[property];
				}.bind(child);
            case 'offsetX':
                return function(){
                    c.left += child.layout[property];
                }.bind(child);
            case 'offsetY':
                return function(){
                    c.top += child.layout[property];
                }.bind(child);
			case 'width':
			case 'height':
				return this.getPropertyFn(child, property);
			case 'absLeft':
				return function () {
					c.left = 0;
				};
			case 'absRight':
				return function () {
					c.right = 0;
				};
			case 'absBottom':
				return function () {
					c.bottom = 0;
				};
			case 'absWidth':
				return function(lm){
					c.width = lm.viewport.absWidth;
				};
			case 'absHeight':
				return function(lm){
					c.height = lm.viewport.absHeight;
				};
			case 'alignParentLeft':
				return function (lm) {
					c.left = lm.viewport.left;
				};
			case 'alignParentRight':
				return function (lm) {
					c.right = lm.viewport.right;
				};
			case 'alignParentTop':
				return function (lm) {
					c.top = lm.viewport.top;
				};
			case 'alignParentBottom':
				return function (lm) {
					c.bottom = lm.viewport.bottom;
				};
			case 'leftOf':
				refC = this.lastChildCoordinates[child.layout.leftOf.id];
				return function () {
					c.right = refC.right + refC.width;
				};
			case 'rightOf':
				refC = this.lastChildCoordinates[child.layout.rightOf.id];
				return function () {
                    // TODO refactor this so that Math.max is no longer needed
					// c.left = Math.max(0, refC.left) + refC.width;
					c.left = refC.left + refC.width;
				};
			case 'below':
				refC = this.lastChildCoordinates[child.layout.below.id];
				return function () {
					c.top = refC.top + refC.height;
				};
			case 'above':
				refC = this.lastChildCoordinates[child.layout.above.id];
				return function () {
					c.bottom = refC.bottom + refC.height;
					console.log(refC.height);
					console.log(refC.bottom);

				};
			case 'sameHeightAs':
				refC = this.lastChildCoordinates[child.layout.sameHeightAs.id];
				return function () {
					c.height = refC.height;
				};
			case 'sameWidthAs':
				refC = this.lastChildCoordinates[child.layout.sameWidthAs.id];
				return function () {
					c.width = refC.width;
				};
			case 'centerInParent':
				return function (lm) {
					c.top = parseInt(lm.viewport.height / 2 - c.height / 2);
					c.left = parseInt(lm.viewport.width / 2 - c.width / 2);
				};
			case 'centerHorizontal':
				return function (lm) {
					c.left = parseInt(lm.viewport.width / 2 - c.width / 2);
				};
			case 'centerVertical':
				return function (lm) {
					c.top = parseInt(lm.viewport.height / 2 - c.height / 2);
				};
			case 'fillLeft':
				return function (lm) {
					if (c.right !== undefined) {
						c.width = lm.viewport.absWidth - c.right;
					}
				};
			case 'fillRight':
				return function (lm) {
					if (c.left === undefined)c.left = 0;
					c.width = lm.viewport.absWidth - c.left - lm.viewport.right;
				};
			case 'fillDown':
				return function (lm) {
					if (c.top === undefined)c.top = 0;
					c.height = lm.viewport.absHeight - c.top - lm.viewport.bottom;
				};
			case 'fillUp':
				return function (lm) {
					if (c.bottom !== undefined) {
						c.height = lm.viewport.absHeight - c.bottom - lm.viewport.top;
					}
				};
			case 'alignLeft':
				return this.getAlignmentFn(child, property, 'left');
			case 'alignRight':
				return this.getAlignmentFn(child, property, 'right');
			case 'alignTop':
				return this.getAlignmentFn(child, property, 'top');
			case 'alignBottom':
				return this.getAlignmentFn(child, property, 'bottom');
		}
		return undefined;
	},

	getAlignmentFn:function (child, alignment, property) {
		var c = this.newChildCoordinates[child.id];
		var refC = this.lastChildCoordinates[child.layout[alignment].id];
		return function () {
			c[property] = refC[property];
		};
	},

    /*
     * Returns layout function for the width and height layout properties
     */
	getPropertyFn:function (child, property) {
		var c = this.newChildCoordinates[child.id];

		if (isNaN(child.layout[property])) {
			switch (child.layout[property]) {
				case 'matchParent':
					return function (lm) {
						c[property] = lm.viewport[property];
					};
				case 'wrap':
					var ws = ludo.dom.getWrappedSizeOfView(child);
					var key = property === 'width' ? 'x' : 'y';
					return function(){
						c[property] = ws[key];
					};
				default:
					if (child.layout[property].indexOf !== undefined &amp;&amp; child.layout[property].indexOf('%') >= 0) {
						var size = parseInt(child.layout[property].replace(/[^0-9]/g));
						return function (lm) {
							c[property] = parseInt(lm.viewport[property] * size / 100);
						}
					}
					return undefined;
			}
		} else {
			return function () {
				c[property] = child.layout[property];
			}.bind(child);
		}
	},

	posProperties:['left', 'right', 'bottom', 'top'],

    /*
     * Final resize function for each child. All the other dynamically created
     */
	getLastLayoutFn:function (child) {
		return function (lm) {
			var c = lm.newChildCoordinates[child.id];
			var lc = lm.lastChildCoordinates[child.id];
			var p = lm.posProperties;
            if(child.layout.above &amp;&amp; child.layout.below){
                c.height = lm.viewport.height - c.bottom - c.top;
            }
			if(child.isHidden()){
				c.width = 0;
				c.height = 0;
			}
			child.resize({
				width:c.width !== lc.width ? c.width : undefined,
				height:c.height !== lc.height ? c.height : undefined
			});

			if(c['right'] !== undefined &amp;&amp; c.width){
				c.left = lm.viewport.absWidth - c.right - c.width;
				c['right'] = undefined;
			}
			if(c.bottom !== undefined &amp;&amp; c.height){
				c.top = lm.viewport.absHeight - c.bottom - c.height;
				c.bottom = undefined;
			}
			if(c.bottom !== undefined){
				var h = lm.viewport.absHeight - c.bottom - (c.top || 0);
				if(h!= lc.height){
					child.resize({ height: lm.viewport.absHeight - c.bottom - (c.top || 0) });
				}
				c.bottom = undefined;
			}

			for (var i = 0; i &lt; p.length; i++) {
				var key = p[i];
				if (c[key] !== undefined){
					lm.positionChild(child, key, c[key]);
				}
				lc[key] = c[key];
			}
			lc.width = c.width;
			lc.height = c.height;
			lm.updateLastCoordinatesFor(child);
		}
	},
    /*
     * Update lastChildCoordinates properties for a child after resize is completed
     * @function updateLastCoordinatesFor
     * @param {ludo.View} child
     * @private
     */
	updateLastCoordinatesFor:function (child) {
		var lc = this.lastChildCoordinates[child.id];
		var el = child.getEl();
		var pos = el.position();
		if (lc.left === undefined) lc.left = pos.left > 0 ? pos.left : 0;
		if (lc.top === undefined) lc.top = pos.top > 0 ? pos.top : 0;
		if (lc.width === undefined) lc.width = el.width != undefined ? el.width() : el.offsetWidth;
		if (lc.height === undefined) lc.height = el.height != undefined ? el.height() : el.offsetHeight;
		if (lc.right === undefined) lc.right = this.viewport.width - lc.left - lc.width;
		if (lc.bottom === undefined) lc.bottom = this.viewport.height - lc.top - lc.height;
	},


	positionChild:function (child, property, value) {
		child.getEl().css(property, value); // style[property] = value + 'px';
		child[property] = value;
	},
    /*
     * Creates empty newChildCoordinates and lastChildCoordinates for a child view
     */
	assignDefaultCoordinates:function (child) {
		this.newChildCoordinates[child.id] = {};
		this.lastChildCoordinates[child.id] = {};
	},

    /*
     * Before first resize, the internal children array is arranged so that views dependent of
     * other views are resized after the view it's depending on. example: if view "a" has leftOf property
     * set to view "b", then view "b" should be resized and positioned first. This method rearranges
     * the internal children array according to this
     * @function arrangeChildren
     * @private
     */
	arrangeChildren:function () {
		this.children = [];
		for (var i = 0; i &lt; this.view.children.length; i++) {
			var c = this.view.children[i];
			this.children.push(c);
			this.assignDefaultCoordinates(c);
			if(c.isHidden()){
				this.setTemporarySize(c, { width:0, height:0 });
			}
		}

		this.createResizables();

		var child = this.getWronglyArrangedChild();
		var counter = 0;
		while (child &amp;&amp; counter &lt; 30) {
			var dep = this.getDependencies(child);
			if (dep.length > 0) {
				for (var j = 0; j &lt; dep.length; j++) {
					if (this.isArrangedBefore(child, dep[j])) {
						var index = this.children.indexOf(child);
						this.children.splice(index, 1);
						this.children.push(child);
					}
				}
			}
			child = this.getWronglyArrangedChild();
			counter++;
		}

		if (counter === 30) {
			ludo.util.log('Possible circular layout references defined for children in Relative layout');
		}
	},


	resizeKeys:{
		'left':'leftOf',
		'right':'rightOf',
		'above':'above',
		'below':'below'
	},
	resizables : {},

    /*
     * Create resize handles for resizable children
     * @function createResizables
     * @private
     */
	createResizables:function () {
		for (var i = this.children.length - 1; i >= 0; i--) {
			var c = this.children[i];
			if (this.isChildResizable(c)) {
				this.resizables[c.id] = {};
				for (var j = 0; j &lt; c.layout.resize.length; j++) {
					var r = c.layout.resize[j];
					var resizer = this.resizables[c.id][r] = this.getResizableFor(c, r);
					this.assignDefaultCoordinates(resizer);
					this.updateReference(this.resizeKeys[r], c, resizer);
                    var pos = r == 'left' || r === 'above' ? i: i+1;
                    this.children.splice(pos, 0, resizer);
				}
			}
		}
	},

	getResizable:function(child, direction){
		return this.resizables[child.id][direction];
	},

    /*
     * Return resizable handle for a child view
     * @function getResizableFor
     * @param {ludo.View} child
     * @param {String} direction
     * @return {ludo.layout.Resizer}
     * @private
     */
	getResizableFor:function (child, direction) {
        // TODO should be possible to render size of resizer to sum of views (see relative.php demo)
		var resizeProp = (direction === 'left' || direction === 'right') ? 'width' : 'height';
		return new ludo.layout.Resizer({
			name:'resizer-' + child.name,
			orientation:(direction === 'left' || direction === 'right') ? 'horizontal' : 'vertical',
			pos:direction,
			renderTo:this.view.getBody(),
			sibling:this.getSiblingForResize(child,direction),
			layout:this.getResizerLayout(child, direction),
			view:child,
			listeners:{
				'resize':function (change) {
					child.layout[resizeProp] += change;
					this.resize();
				}.bind(this),
				'before':this.beforeResize.bind(this)
			}
		});
	},

    /*
     * Return sibling which may be affected when a child is resized
     * @function getSiblingForResize
     * @param {ludo.View} child
     * @param {String} direction
     * @return {ludo.View|undefined}
     * @private
     */
	getSiblingForResize:function(child, direction){
		switch(direction){
			case 'left':
				return child.layout.rightOf;
			case 'right':
				return child.layout.leftOf;
			case 'above':
				return child.layout.below;
			case 'below':
				return child.layout.above;
		}
		return undefined;
	},
    /*
     * Before resize function executed for a resize handle
     * @function beforeResize
     * @param {ludo.layout.Resizer} resize
     * @param {ludo.View} child
     * @private
     */
	beforeResize:function(resize, child){

		if(resize.orientation === 'horizontal'){
			var min = this.toPixels(child.layout.minWidth || 10);
			resize.setMinWidth(min);
			var max = child.layout.maxWidth || this.view.getBody().width();
			max = this.toPixels(max, true);
			resize.setMaxWidth(max);
		}else{
			var minHeight = this.toPixels(child.layout.minHeight || 10);
			resize.setMinHeight(minHeight);
			resize.setMaxHeight(child.layout.maxHeight || this.view.getBody().height());
		}
	},

	toPixels:function(value, isWidth){
		if(jQuery.type(value) == "string" &amp;&amp; value.indexOf('%') >0){
			var val = parseInt(value);
			return val / 100 * (isWidth ? this.viewport.width : this.viewport.height);
		}
		return value;
	},

    /*
     * Return layout config for a resize handle
     * @function getResizerLayout
     * @param {ludo.View} child
     * @param {String} resize
     * @return {ludo.layout.RelativeSpec}
     * @private
     */
	getResizerLayout:function (child, resize) {
		var ret = {};
		switch (resize) {
			case 'left':
			case 'right':
				ret.sameHeightAs = child;
				ret.alignTop = child;
				ret.width = 5;
				break;
			default:
				ret.sameWidthAs = child;
				ret.alignLeft = child;
				ret.height = 5;
		}
		return ret;
	},

    /*
     * Update layout references when a resize handle has been created. example: When a resize handle
     * is added to the left of a child view. The leftOf view of this child is now the resize handle
     * and not another view
     * @function updateReferences
     * @param {String} property
     * @param {ludo.View} child
     * @param {ludo.layout.Resizer} resizer
     * @private
     */
	updateReference:function (property, child, resizer) {
		for (var i = 0; i &lt; this.children.length; i++) {
			if (this.children[i].layout[property] === child) {
				this.children[i].layout[property] = resizer;
				resizer.layout.affectedSibling = this.children[i];
			}
		}
		resizer.layout[property] = child;
	},
    /**
     * Returns true if a child is resizable
     * @function isChildResizable
     * @param {ludo.View} child
     * @return {Boolean}
     * @private
     */
	isChildResizable:function (child) {
		return child.layout &amp;&amp; child.layout.resize &amp;&amp; child.layout.resize.length > 0;
	},

    /*
     * Return a child which should be rearrange because it's layout depends on a next sibling
     * @function getWronglyArrangedChild
     * @return {ludo.View|undefined}
     * @private
     */
	getWronglyArrangedChild:function () {
		for (var i = 0; i &lt; this.children.length; i++) {
			var c = this.children[i];
			var dep = this.getDependencies(c);
			if (dep.length > 0) {
				for (var j = 0; j &lt; dep.length; j++) {
					if (this.isArrangedBefore(c, dep[j])) {
						return c;
					}
				}
			}
		}
		return undefined;
	},
    /*
     * Returns true if a child is previous sibling of another child
     * @function isArrangedBefore
     * @param {ludo.View} child
     * @param {ludo.View} of
     * @return {Boolean}
     * @private
     */
	isArrangedBefore:function (child, of) {
		return this.children.indexOf(child) &lt; this.children.indexOf(of);
	},

    /*
     * All the layout options where value is a reference to another child
     * @property depKeys
     * @private
     */
	depKeys:['above', 'below', 'leftOf', 'rightOf', 'alignLeft', 'alignBottom', 'alignRight', 'alignTop', 'sameWidthAs', 'sameHeightAs'],

    /*
     * Return all the siblings a child is depending on for layout
     * @function getDependencies
     * @param {ludo.View} child
     * @return {Array}
     * @private
     */
	getDependencies:function (child) {
		var ret = [];
		for (var i = 0; i &lt; this.depKeys.length; i++) {
			if (child.layout[this.depKeys[i]] !== undefined) {
				var ref = child.layout[this.depKeys[i]];
				if (ref !== undefined) {
					ret.push(ref);
				}
			}
		}
		return ret;
	},
    /*
     * Return direct reference to child
     * @function getReference
     * @param {String|ludo.View} child
     * @return {ludo.View}
     * @private
     */
	getReference:function (child) {
		if (child['getId'] !== undefined)return child;
		if (this.view.child[child] !== undefined)return this.view.child[child];
		return ludo.get(child);
	},

    /*
     * Clear internal children array. When this is done, resize function will be recreated. This happens
     * when a child is removed or when a new child is added
     * @function clearChildren
     * @private
     */
	clearChildren:function () {
		this.children = undefined;
	},
    /*
     * Return internal children array
     * @function getChildren
     * @return {Array}
     * @private
     */
	getChildren:function () {
		return this.children;
	},

    /*
     * Validate and set required layout properties of new children
     * @function onNewChild
     * @param {ludo.View} child
     * @private
     */
	onNewChild:function (child) {
		this.parent(child);
		if(child.getEl().css != undefined){
			child.getEl().css('position', 'absolute');
		}
        var l = child.layout;
		if (l.centerInParent !== undefined) {
			l.centerHorizontal = undefined;
			l.centerVertical = undefined;
		}
		if(l.fillRight === undefined){
			if (l.width === undefined)l.width = child.width ? child.width : undefined;
		}

		if (l.height === undefined)l.height = child.height ? child.height : undefined;

		if (l.leftOf)l.right = undefined;
		if (l.rightOf)l.left = undefined;
		if (l.below)l.top = undefined;
		if (l.above)l.bottom = undefined;
	},

    /**
     * Add events to child view
     * @function addChildEvents
     * @param {ludo.View} child
     * @private
     */
	addChildEvents:function(child){
		child.addEvent('hide', this.hideChild.bind(this));
		child.addEvent('show', this.clearTemporaryValues.bind(this));
		child.addEvent('collapse', this.minimize.bind(this));
		child.addEvent('minimize', this.minimize.bind(this));
		child.addEvent('expand', this.clearTemporaryValues.bind(this));
		child.addEvent('maximize', this.clearTemporaryValues.bind(this));
	}
});</pre>
    </article>
</section>





		</div>
	</div>

	<div class="clearfix"></div>

	

</div>
</div>


    <div class="modal fade" id="searchResults">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title">Search results</h4>
          </div>
          <div class="modal-body"></div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          </div>
        </div><!-- /.modal-content -->
      </div><!-- /.modal-dialog -->
    </div>


<footer>


	<span class="copyright">
	© LudoJS.com 2012-2016
	</span>

<span class="jsdoc-message">
	Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.2</a>
	
		on Mon Nov 28th 2016
	
	using the <a href="https://github.com/docstrap/docstrap">DocStrap template</a>.
</span>
</footer>

<script src="scripts/docstrap.lib.js"></script>
<script src="scripts/toc.js"></script>

    <script type="text/javascript" src="scripts/fulltext-search-ui.js"></script>


<script>
$( function () {
	$( "[id*='$']" ).each( function () {
		var $this = $( this );

		$this.attr( "id", $this.attr( "id" ).replace( "$", "__" ) );
	} );

	$( ".tutorial-section pre, .readme-section pre, pre.prettyprint.source" ).each( function () {
		var $this = $( this );

		var example = $this.find( "code" );
		exampleText = example.html();
		var lang = /{@lang (.*?)}/.exec( exampleText );
		if ( lang && lang[1] ) {
			exampleText = exampleText.replace( lang[0], "" );
			example.html( exampleText );
			lang = lang[1];
		} else {
			var langClassMatch = example.parent()[0].className.match(/lang\-(\S+)/);
			lang = langClassMatch ? langClassMatch[1] : "javascript";
		}

		if ( lang ) {

			$this
			.addClass( "sunlight-highlight-" + lang )
			.addClass( "linenums" )
			.html( example.html() );

		}
	} );

	Sunlight.highlightAll( {
		lineNumbers : true,
		showMenu : true,
		enableDoclinks : true
	} );

	$.catchAnchorLinks( {
        navbarOffset: 10
	} );
	$( "#toc" ).toc( {
		anchorName  : function ( i, heading, prefix ) {
			return $( heading ).attr( "id" ) || ( prefix + i );
		},
		selectors   : "#toc-content h1,#toc-content h2,#toc-content h3,#toc-content h4",
		showAndHide : false,
		smoothScrolling: true
	} );

	$( "#main span[id^='toc']" ).addClass( "toc-shim" );
	$( '.dropdown-toggle' ).dropdown();

    $( "table" ).each( function () {
      var $this = $( this );
      $this.addClass('table');
    } );

} );
</script>



<!--Navigation and Symbol Display-->


<!--Google Analytics-->

<script>
	(function ( i, s, o, g, r, a, m ) {
		i['GoogleAnalyticsObject'] = r;
		i[r] = i[r] || function () {
			(i[r].q = i[r].q || []).push( arguments )
		}, i[r].l = 1 * new Date();
		a = s.createElement( o ),
			m = s.getElementsByTagName( o )[0];
		a.async = 1;
		a.src = g;
		m.parentNode.insertBefore( a, m )
	})( window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga' );

	ga( 'create', 'UA-34153510-1', 'http://www.ludojs.com' );
	ga( 'send', 'pageview' );
</script>



    <script type="text/javascript">
        $(document).ready(function() {
            SearcherDisplay.init();
        });
    </script>


</body>
</html>
